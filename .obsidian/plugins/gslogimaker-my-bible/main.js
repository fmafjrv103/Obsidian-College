/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyBible
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// node_modules/async-mutex/index.mjs
var E_TIMEOUT = new Error("timeout while waiting for mutex to become available");
var E_ALREADY_LOCKED = new Error("mutex already locked");
var E_CANCELED = new Error("request for lock canceled");
var __awaiter$2 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var Semaphore = class {
  constructor(_value, _cancelError = E_CANCELED) {
    this._value = _value;
    this._cancelError = _cancelError;
    this._weightedQueues = [];
    this._weightedWaiters = [];
  }
  acquire(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    return new Promise((resolve, reject) => {
      if (!this._weightedQueues[weight - 1])
        this._weightedQueues[weight - 1] = [];
      this._weightedQueues[weight - 1].push({ resolve, reject });
      this._dispatch();
    });
  }
  runExclusive(callback, weight = 1) {
    return __awaiter$2(this, void 0, void 0, function* () {
      const [value, release] = yield this.acquire(weight);
      try {
        return yield callback(value);
      } finally {
        release();
      }
    });
  }
  waitForUnlock(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    return new Promise((resolve) => {
      if (!this._weightedWaiters[weight - 1])
        this._weightedWaiters[weight - 1] = [];
      this._weightedWaiters[weight - 1].push(resolve);
      this._dispatch();
    });
  }
  isLocked() {
    return this._value <= 0;
  }
  getValue() {
    return this._value;
  }
  setValue(value) {
    this._value = value;
    this._dispatch();
  }
  release(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    this._value += weight;
    this._dispatch();
  }
  cancel() {
    this._weightedQueues.forEach((queue) => queue.forEach((entry) => entry.reject(this._cancelError)));
    this._weightedQueues = [];
  }
  _dispatch() {
    var _a;
    for (let weight = this._value; weight > 0; weight--) {
      const queueEntry = (_a = this._weightedQueues[weight - 1]) === null || _a === void 0 ? void 0 : _a.shift();
      if (!queueEntry)
        continue;
      const previousValue = this._value;
      const previousWeight = weight;
      this._value -= weight;
      weight = this._value + 1;
      queueEntry.resolve([previousValue, this._newReleaser(previousWeight)]);
    }
    this._drainUnlockWaiters();
  }
  _newReleaser(weight) {
    let called = false;
    return () => {
      if (called)
        return;
      called = true;
      this.release(weight);
    };
  }
  _drainUnlockWaiters() {
    for (let weight = this._value; weight > 0; weight--) {
      if (!this._weightedWaiters[weight - 1])
        continue;
      this._weightedWaiters[weight - 1].forEach((waiter) => waiter());
      this._weightedWaiters[weight - 1] = [];
    }
  }
};
var __awaiter$1 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var Mutex = class {
  constructor(cancelError) {
    this._semaphore = new Semaphore(1, cancelError);
  }
  acquire() {
    return __awaiter$1(this, void 0, void 0, function* () {
      const [, releaser] = yield this._semaphore.acquire();
      return releaser;
    });
  }
  runExclusive(callback) {
    return this._semaphore.runExclusive(() => callback());
  }
  isLocked() {
    return this._semaphore.isLocked();
  }
  waitForUnlock() {
    return this._semaphore.waitForUnlock();
  }
  release() {
    if (this._semaphore.isLocked())
      this._semaphore.release();
  }
  cancel() {
    return this._semaphore.cancel();
  }
};

// main.ts
var BUILD_START_TOAST = "Bible build started!";
var BUILD_END_TOAST = "Bible build finished!";
var DEFAULT_SETTINGS = {
  translation: "",
  bible_folder: "/Bible/",
  book_name_format: "{order} {book}",
  book_name_delimiter: " ",
  chapter_name_format: "{order} {book} {chapter}",
  book_name_capitalization: "name_case",
  book_name_abbreviated: false,
  padded_order: true,
  padded_chapter: false,
  build_with_dynamic_verses: true,
  verse_body_format: "###### {verse}\n{verse_text}",
  chapter_body_format: "\n###### [[{first_chapter_name}|{book} 1 \u23EE]] | [[{last_chapter_name}|{last_chapter_book} {last_chapter} \u25C0]] | [[{book}]] | [[{next_chapter_name}|\u25B6 {next_chapter_book} {next_chapter}]] | [[{final_chapter_name}|\u23ED {book} {final_chapter}|]]\n\n{verses}\n\n###### [[{first_chapter_name}|{book} 1 \u23EE]] | [[{last_chapter_name}|{last_chapter_book} {last_chapter} \u25C0]] | [[{book}]] | [[{next_chapter_name}|\u25B6 {next_chapter_book} {next_chapter}]] | [[{final_chapter_name}|\u23ED {book} {final_chapter}|]]\n\n",
  store_locally: false,
  _built_translation: "",
  set_translation: async function(val, plugin) {
    let has_translation = false;
    let translations = await plugin.bible_api.get_translations();
    if (!(val in translations)) {
      this.translation = await plugin.bible_api.get_default_translation();
    } else {
      this.translation = val;
    }
  }
};
function httpGet(theUrl) {
  return new Promise(async (ok, err) => {
    ok(await (0, import_obsidian.requestUrl)(theUrl).text);
  });
}
function is_alpha(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 64 && char < 91 || char > 96 && char < 123 || char > 39 && char < 42) {
      continue;
    }
    return false;
  }
  return true;
}
function is_alphanumeric(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 64 && char < 91 || char > 96 && char < 123 || char > 47 && char < 58) {
      continue;
    }
    return false;
  }
  return true;
}
function is_numeric(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 47 && char < 58) {
      continue;
    }
    return false;
  }
  return true;
}
var MyBible = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.bible_api = new BollsLifeBibleAPI();
    this.bible_api.plugin = this;
    await this.settings.set_translation(this.settings.translation, this);
    this.addCommand({
      id: "create_bible_files",
      name: "Build bible",
      callback: async () => {
        let bible_path = (0, import_obsidian.normalizePath)(this.settings.bible_folder);
        let bible_folder = this.app.vault.getAbstractFileByPath(bible_path);
        if (bible_folder instanceof import_obsidian.TFile) {
          new ErrorModal(
            this.app,
            this,
            "Failed to build bible",
            'The bible folder defined in settings, "{0}", was expected to point to a folder, but it points to a file. Try changing the path to point to a folder, or change the file to a folder.'.format(this.settings.bible_folder)
          ).open();
          return;
        } else if (bible_folder === null) {
          this.app.vault.adapter.mkdir(bible_path);
        } else {
        }
        let folders_and_files = await this.app.vault.adapter.list(bible_path);
        if (folders_and_files.files.length + folders_and_files.folders.length != 0) {
          new ClearOldBibleFilesModal(this.app, this).open();
        } else {
          new import_obsidian.Notice(BUILD_START_TOAST);
          await this.build_bible(bible_path);
          new import_obsidian.Notice(BUILD_END_TOAST);
        }
      }
    });
    this.addCommand({
      id: "clear_cache",
      name: "Clear cache",
      callback: async () => {
        new ClearCacheFilesModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "download_bible",
      name: "Download translation",
      callback: async () => {
        new DownloadBibleModal(
          this.app,
          this
        ).open();
      }
    });
    this.registerMarkdownCodeBlockProcessor("verse", async (source, element, context) => {
      const ref = source.trim().replace(/[:-]/g, " ").split(" ");
      let book = null;
      let book_id = -1;
      let chapter = -1;
      let verse = -1;
      let verse_end = -1;
      let maybe_translation = null;
      let i = 0;
      while (i != ref.length) {
        if (i == 0) {
          book = (book || "") + ref[i];
        } else {
          if (!is_alpha(ref[i])) {
            break;
          }
          book += " " + ref[i];
        }
        i += 1;
      }
      if (is_numeric(book || "")) {
        book_id = Number(book);
        book = null;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        chapter = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        verse = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        verse_end = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_alphanumeric(ref[i])) {
        maybe_translation = ref[i];
        i += 1;
      }
      let translation = maybe_translation || this.settings.translation;
      if (book !== null) {
        book_id = await this.bible_api.book_id(this.settings._built_translation || translation, book);
      }
      book = (await this.bible_api.get_book(translation, book_id)).name;
      let text = "";
      if (book.length === 0) {
        text = "[Book and chapter must be provided]";
      } else if (chapter === -1) {
        text = "[Chapter must be provided]";
      } else if (verse === -1) {
        let verses = await this.bible_api.get_chapter_cached(
          translation,
          book_id,
          chapter
        );
        for (let verse_i of verses.keys()) {
          let verse2 = verses[verse_i];
          text += "<sup>" + (verse_i + 1) + "</sup> " + verse2;
          if (verse_i != verses.length - 1) {
            text += "<br>";
          }
        }
        if (text.length === 0) {
          text = "[Could not find text for the book '{1}', translation '{2}', chapter {0}]".format(String(chapter), book, translation);
        }
      } else if (verse_end < verse) {
        text = await this.bible_api.get_verse(
          translation,
          book_id,
          chapter,
          verse
        );
        if (text.length === 0) {
          text = "[Could not find text for the book '{1}', translation '{3}', chapter {0}, verse {2}]".format(String(chapter), book, String(verse), translation);
        }
      } else {
        let verses = await this.bible_api.get_chapter_cached(
          translation,
          book_id,
          chapter
        );
        let j = verse;
        while (j < verse_end + 1 && j < verses.length) {
          text += "<sup>" + j + "</sup> " + verses[j - 1];
          if (j != verse_end) {
            text += "<br>";
          }
          j += 1;
        }
        if (text.length === 0) {
          text = "[Could not find text for the book '{1}', translation '{4}', chapter {0}, verses {2}-{3}]".format(String(chapter), book, String(verse), String(verse_end), translation);
        }
      }
      let span = element.createSpan({
        text: ""
      });
      let tags = text.matchAll(
        /(?:<\s*([\w]*)\s*>(.*?)<\s*\/\1\s*>)|<\s*(br|\/br|br\/)\s*>|(.+?(?:(?=<\s*[/\\\w]*\s*>)|$))/gs
      );
      for (let match of tags) {
        let tag_type = match[1];
        let tag_text = match[2];
        let lone_tag_type = match[3];
        let normal_text = match[4];
        if (normal_text !== void 0) {
          span.createSpan({
            text: normal_text
          });
        } else if (lone_tag_type === "br") {
          span.createEl(lone_tag_type);
        } else if (lone_tag_type === "br/" || lone_tag_type === "/br") {
          span.createEl("br");
          span.createSpan({
            text: "\n"
          });
        } else if (lone_tag_type === "/J") {
        } else if (tag_type === "sup") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "sub") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "S") {
          span.createEl(
            "sub",
            { text: tag_text, attr: { style: "opacity: 0.5" } }
          );
        } else if (tag_type === "i") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "b") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "e") {
          span.createEl("i").createEl("q", { text: tag_text });
        } else {
          span.createSpan(
            { text: "<{0}>{1}</{0}>".format(tag_type, tag_text) }
          );
        }
      }
    });
    this.addSettingTab(new SettingsTab(this.app, this));
  }
  onunload() {
  }
  async build_bible(bible_path) {
    this.settings._built_translation = this.settings.translation;
    await this.saveSettings();
    let ctx = new BuildContext();
    ctx.translation = this.settings._built_translation;
    ctx.books = await this.bible_api.get_books(
      this.settings._built_translation
    );
    ctx.verse_counts = await this.bible_api.get_verse_count(ctx.translation);
    if (!this.settings.build_with_dynamic_verses) {
      ctx.translation_texts = await this.bible_api.get_translation(ctx.translation);
    }
    for (let book of ctx.books) {
      ctx.set_book(book.id);
      let book_path = bible_path;
      if (this.settings.book_name_format.length != 0) {
        book_path += "/" + ctx.format_book_name(this, ctx.book, this.settings.book_name_capitalization);
        this.app.vault.adapter.mkdir((0, import_obsidian.normalizePath)(book_path));
      }
      let file_promises = [];
      for (const chapter_i of Array(ctx.book.chapters).keys()) {
        ctx.set_chapter(chapter_i + 1);
        ctx.verses_text = "";
        let verse = 1;
        while (verse != ctx.get_verse_count() + 1) {
          ctx.verse = verse;
          ctx.verses_text += ctx.format_verse_body(
            this,
            this.settings.build_with_dynamic_verses
          );
          if (verse != ctx.get_verse_count()) {
            ctx.verses_text += "\n";
          }
          verse += 1;
        }
        let chapter_note_name = ctx.format_chapter_name(this);
        let note_body = ctx.format_chapter_body(this);
        let file_path = (0, import_obsidian.normalizePath)(book_path + "/" + chapter_note_name + ".md");
        let file = this.app.vault.getAbstractFileByPath(file_path);
        if (file instanceof import_obsidian.TFile) {
          file_promises.push(this.app.vault.modify(file, note_body));
        } else if (file === null) {
          file_promises.push(
            this.app.vault.create(
              file_path,
              note_body
            )
          );
        }
      }
      await Promise.all(file_promises);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var BuildContext = class {
  find_book(book_id) {
    for (let i of this.books.keys()) {
      if (this.books[i].id === book_id) {
        return i;
      }
    }
    throw new Error("No book by id ${book_id}");
  }
  abbreviate_book_name(name) {
    return name.replace(" ", "").slice(0, 3);
  }
  format_book_name(plugin, book, casing) {
    let delim = plugin.settings.book_name_delimiter;
    let book_name = this.to_case(book.name, casing, delim);
    if (plugin.settings.book_name_abbreviated) {
      book_name = this.abbreviate_book_name(book_name);
    }
    return plugin.settings.book_name_format.replace(
      /{order}/g,
      String(book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{book}/g, book_name);
  }
  format_book_name_without_order(plugin, book, casing) {
    let delim = plugin.settings.book_name_delimiter;
    let book_name = this.to_case(book.name, casing, delim);
    if (plugin.settings.book_name_abbreviated) {
      book_name = this.abbreviate_book_name(book_name);
    }
    return book_name;
  }
  format_chapter_body(plugin) {
    let casing = plugin.settings.book_name_capitalization;
    return plugin.settings.chapter_body_format.replace(/{verses}/g, this.verses_text).replace(/{book}/g, this.format_book_name_without_order(plugin, this.book, casing)).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{chapter}/g, String(this.chapter)).replace(/{chapter_name}/g, this.format_chapter_name(plugin)).replace(/{last_chapter}/g, String(this.last_chapter)).replace(/{last_chapter_name}/g, this.format_chapter_name(plugin, "last")).replace(/{last_chapter_book}/g, this.format_book_name_without_order(plugin, this.last_book, casing)).replace(/{next_chapter}/g, String(this.next_chapter)).replace(/{next_chapter_name}/g, this.format_chapter_name(plugin, "next")).replace(/{next_chapter_book}/g, this.format_book_name_without_order(plugin, this.next_book, casing)).replace(/{first_chapter}/g, "1").replace(/{first_chapter_name}/g, this.format_chapter_name(plugin, "first")).replace(/{final_chapter}/g, String(this.book.chapters)).replace(/{final_chapter_name}/g, this.format_chapter_name(plugin, "final"));
  }
  format_chapter_name(plugin, tense = "current") {
    let format = plugin.settings.chapter_name_format;
    if (format.length == 0) {
      format = DEFAULT_SETTINGS.chapter_name_format;
    }
    let pad_by = 3;
    if (this.get_verse_count() < 10) {
      pad_by = 1;
    } else if (this.get_verse_count() < 100) {
      pad_by = 2;
    }
    let casing = plugin.settings.book_name_capitalization;
    let delim = plugin.settings.book_name_delimiter;
    let book_name = "";
    let chapter = -1;
    switch (tense) {
      case "current": {
        book_name = this.format_book_name_without_order(plugin, this.book, casing);
        chapter = this.chapter;
        break;
      }
      case "last": {
        book_name = this.format_book_name_without_order(plugin, this.last_book, casing);
        chapter = this.last_chapter;
        break;
      }
      case "next": {
        book_name = this.format_book_name_without_order(plugin, this.next_book, casing);
        chapter = this.next_chapter;
        break;
      }
      case "first": {
        book_name = this.format_book_name_without_order(plugin, this.book, casing);
        chapter = 1;
        break;
      }
      case "final": {
        book_name = this.format_book_name_without_order(plugin, this.book, casing);
        chapter = this.book.chapters;
        break;
      }
      default:
        throw new Error("Unmatched switch case at tense '{0}'".format(tense));
    }
    return format.replace(/{book}/g, book_name).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(
      /{chapter}/g,
      String(chapter).padStart(pad_by * Number(plugin.settings.padded_chapter), "0")
    );
  }
  format_verse_body(plugin, build_with_dynamic_verses) {
    let book_name = this.format_book_name_without_order(
      plugin,
      this.book,
      "current"
    );
    let verse_text = "";
    if (build_with_dynamic_verses) {
      verse_text = "``` verse\n{book_id} {chapter} {verse} \n```";
    } else {
      verse_text = this.translation_texts.books[this.book.id][this.chapter - 1][this.verse - 1];
    }
    return plugin.settings.verse_body_format.replace(/{verse_text}/g, verse_text).replace(/{verse}/g, String(this.verse)).replace(/{book}/g, book_name).replace(/{book_id}/g, String(this.book.id)).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{chapter}/g, String(this.chapter)).replace(/{chapter_name}/g, this.format_chapter_name(plugin)).replace(/{final_chapter}/g, String(this.book.chapters));
  }
  set_book(book_id) {
    let book_i = this.find_book(book_id);
    this.book = this.books[book_i];
    let last_book_i = this.chapter !== 1 ? book_i : book_i - 1;
    if (last_book_i === -1) {
      last_book_i = this.books.length - 1;
    }
    this.last_book = this.books[last_book_i];
    let next_book_i = this.chapter !== this.book.chapters ? book_i : book_i + 1;
    if (next_book_i === this.books.length) {
      next_book_i = 0;
    }
    this.next_book = this.books[next_book_i];
  }
  set_chapter(chapter) {
    this.chapter = chapter;
    this.set_book(this.book.id);
    this.last_chapter = chapter !== 1 ? chapter - 1 : this.last_book.chapters;
    this.next_chapter = chapter !== this.book.chapters ? chapter + 1 : 1;
  }
  // Sets the capitalization of the given name depending on *name_case*.
  to_case(name, name_case, delimeter) {
    if (name_case == "lower_case") {
      return name.toLowerCase().replace(/ /g, delimeter);
    } else if (name_case == "upper_case") {
      return name.toUpperCase().replace(/ /g, delimeter);
    }
    return name.replace(/ /g, delimeter);
  }
  get_verse_count() {
    return this.verse_counts.get_count_for(this.book.id, this.chapter);
  }
};
var VerseCounts = class {
  get_count_for(book, chapter) {
    return this.books[book][chapter];
  }
};
var BibleAPI = class {
  constructor() {
    this.book_cache = {};
    this.cache_clear_timer = null;
    this.chapter_cache = {};
  }
  async cache_chapter(translation, book_id, chapter, chapter_data, save_locally) {
    let key = this.make_chapter_key(translation, book_id, chapter);
    this.chapter_cache[key] = {
      translation,
      book_id,
      chapter,
      chapter_data,
      mutex: new Mutex()
    };
    if (save_locally) {
      let cache_path = this.get_cache_path();
      this.plugin.app.vault.adapter.mkdir(cache_path);
      let cached_file_name = "{0} {1} {2}.txt".format(translation, String(book_id), String(chapter));
      let cached_file_path = (0, import_obsidian.normalizePath)(
        cache_path + "/" + cached_file_name
      );
      if (chapter_data != null && !await this.plugin.app.vault.adapter.exists(cached_file_path)) {
        let body = "";
        for (let i of chapter_data.keys()) {
          body += chapter_data[i];
          if (i !== chapter_data.length - 1) {
            body += "\n";
          }
        }
        await this.plugin.app.vault.adapter.write(
          cached_file_path,
          body
        );
      }
    }
    if (this.cache_clear_timer !== null && this.cache_clear_timer_promise_err !== null) {
      this.cache_clear_timer_promise_err(null);
    }
    this.cache_clear_timer = new Promise((ok, err) => {
      this.cache_clear_timer_promise_err = err;
      setTimeout(ok, 6e4 * 60);
    });
    this.cache_clear_timer.then(() => this.clear_cache()).catch((err) => {
    });
  }
  async clear_cache() {
    this.chapter_cache = {};
    this.cache_clear_timer = null;
    let cache_path = this.get_cache_path();
    if (await this.plugin.app.vault.adapter.exists(cache_path)) {
      if (!await this.plugin.app.vault.adapter.trashSystem(cache_path)) {
        await this.plugin.app.vault.adapter.trashLocal(cache_path);
      }
    }
  }
  async book_id(translation, book_name) {
    let books = await this.get_books(translation);
    for (let i of books.keys()) {
      if (books[i].name === book_name) {
        return books[i].id;
      }
    }
    if (book_name in DEFAULT_NAME_MAP) {
      return DEFAULT_NAME_MAP[book_name];
    }
    throw new Error(
      "Translation '{0}' has no book named '{1}'".format(translation, book_name)
    );
  }
  async get_translation(translation) {
    throw new Error("unimplemented");
  }
  async get_book(translation, book_id) {
    let book_key = "{0} {1}".format(translation, String(book_id));
    if (!(book_key in this.book_cache)) {
      this.book_cache[book_key] = {
        book_id,
        translation,
        data: null,
        mutex: new Mutex()
      };
    }
    let cached = this.book_cache[book_key];
    if (cached.data === null) {
      await cached.mutex.acquire().then(async () => {
        cached.data = await this._get_book(translation, book_id);
        cached.mutex.cancel();
        cached.mutex.release();
      }).catch((err) => {
        if (err === E_CANCELED) {
        } else {
          throw new Error(err);
        }
      });
    }
    if (cached.data == null) {
      throw new Error();
    }
    return cached.data;
  }
  async _get_book(translation, book_id) {
    throw new Error("unimplemented");
  }
  get_books(translation) {
    throw new Error("unimplemented");
  }
  get_cache_path() {
    return (0, import_obsidian.normalizePath)(this.plugin.manifest.dir + "/.mybiblecache");
  }
  async get_chapter_cached(translation, book_id, chapter) {
    let chapter_key = this.make_chapter_key(translation, book_id, chapter);
    if (!(chapter_key in this.chapter_cache)) {
      this.cache_chapter(
        translation,
        book_id,
        chapter,
        null,
        false
      );
    }
    let cached = this.chapter_cache[chapter_key];
    if (cached.chapter_data === null) {
      await cached.mutex.acquire().then(async () => {
        if (this.plugin.settings.store_locally) {
          let cached_file_name = "{0} {1} {2}.txt".format(translation, String(book_id), String(chapter));
          let cache_path = this.get_cache_path();
          this.plugin.app.vault.adapter.mkdir(cache_path);
          let cached_file_path = (0, import_obsidian.normalizePath)(
            cache_path + "/" + cached_file_name
          );
          if (await this.plugin.app.vault.adapter.exists(cached_file_path)) {
            let raw = await this.plugin.app.vault.adapter.read(cached_file_path);
            if (raw.startsWith("[")) {
              cached.chapter_data = JSON.parse(raw);
            } else {
              cached.chapter_data = raw.split("\n");
            }
          }
        }
        if (cached.chapter_data === null) {
          cached.chapter_data = await this.get_chapter_uncached(
            translation,
            book_id,
            chapter
          );
        }
        cached.mutex.cancel();
        cached.mutex.release();
      }).catch((err) => {
        if (err === E_CANCELED) {
        } else {
          throw new Error(err);
        }
      });
    }
    if (cached.chapter_data === null || cached.chapter_data.length == 0) {
      return [];
    }
    await this.cache_chapter(
      translation,
      book_id,
      chapter,
      cached.chapter_data,
      this.plugin.settings.store_locally
    );
    return cached.chapter_data;
  }
  async get_chapter_uncached(translation, book_id, chapter) {
    throw new Error("unimplemented");
  }
  async get_default_translation() {
    throw new Error("unimplemented");
  }
  get_translations() {
    throw new Error("unimplemented");
  }
  get_verse(translation, book_id, chapter, verse) {
    throw new Error("unimplemented");
  }
  async get_verse_count(translation) {
    throw new Error("unimplemented");
  }
  make_chapter_key(translation, book_id, chapter) {
    return "{0}.{1}.{2}".format(translation, String(book_id), String(chapter));
  }
};
var BollsLifeBibleAPI = class extends BibleAPI {
  constructor() {
    super(...arguments);
    this.chapter_cache = {};
    this.translations = {};
    this.translation_maps = {};
    this.cache_clear_timer = null;
    this.book_mutex = new Mutex();
  }
  _chapter_key(translation, book_id, chapter) {
    return "{0}.{1}.{2}".format(translation, String(book_id), String(chapter));
  }
  async _generate_translation_map(translation) {
    let map = await (0, import_obsidian.requestUrl)(
      "https://bolls.life/get-books/{0}/".format(translation)
    ).json;
    let book_data = [];
    for (let item of map) {
      book_data.push({
        name: item["name"],
        chapters: item["chapters"],
        id: item["bookid"]
      });
    }
    this.translation_maps[translation] = book_data;
  }
  async _book_to_id(translation, book) {
    let book_ = book.toLowerCase();
    let map = await this._get_translation_map("YLT");
    for (let i in map) {
      let book_data = map[i];
      if (book_ == book_data["name"].toLowerCase()) {
        return Number(i) + 1;
      }
    }
    throw new Error("No book exists by name {0}.".format(book));
  }
  async _id_to_book(translation, book_id) {
    let map = await this._get_translation_map("YLT");
    return map[book_id - 1]["name"];
  }
  async get_chapter_uncached(translation, book_id, chapter) {
    try {
      let chapter_data = JSON.parse(await httpGet(
        "https://bolls.life/get-chapter/{0}/{1}/{2}/".format(translation, String(book_id), String(chapter))
      )).map((x) => x.text);
      return chapter_data;
    } catch (e) {
      if (e instanceof Error && e.message.startsWith("No book exists by name")) {
        return [];
      }
      throw e;
    }
  }
  async _get_translation_map(translation) {
    if (!(translation in this.translation_maps)) {
      await this._generate_translation_map(translation);
    }
    return this.translation_maps[translation];
  }
  async get_translation(translation) {
    let verses = JSON.parse(
      await httpGet(
        "https://bolls.life/static/translations/{0}.json".format(translation)
      )
    );
    let bible = {
      translation,
      books: {}
    };
    await new Promise(async (ok, err) => {
      let i = 0;
      let curr_book_id = -1;
      let curr_chapter = -1;
      while (i != verses.length) {
        let verse_json = verses[i];
        if (curr_book_id != verse_json["book"]) {
          curr_book_id = verse_json["book"];
          bible.books[curr_book_id] = [];
          curr_chapter = -1;
        }
        if (curr_chapter != verse_json["chapter"]) {
          curr_chapter = verse_json["chapter"];
          let book_data = bible.books[curr_book_id];
          book_data.push([]);
        }
        bible.books[curr_book_id][curr_chapter - 1].push(verse_json["text"]);
        i += 1;
      }
      ok(null);
    });
    return bible;
  }
  async _get_book(translation, book_id) {
    let books = await this.get_books(translation);
    for (let book of books) {
      if (book.id == book_id) {
        this.book_mutex.cancel();
        this.book_mutex.release();
        return book;
      }
    }
    throw new Error();
  }
  async get_books(translation) {
    let books = await this._get_translation_map(translation);
    books.sort(function(x, y) {
      if (x.id < y.id) {
        return -1;
      }
      if (x.id > y.id) {
        return 1;
      }
      return 0;
    });
    return books;
  }
  async get_default_translation() {
    return "YLT";
  }
  async get_translations() {
    if (Object.keys(this.translations).length === 0) {
      let list = JSON.parse(await httpGet(
        "https://bolls.life/static/bolls/app/views/languages.json"
      ));
      for (let language of list) {
        for (let item of language["translations"]) {
          if (item["short_name"] in this.translations) {
            throw new Error("Translation already added to map");
          }
          this.translations[item["short_name"]] = {
            abbreviated_name: item["short_name"],
            display_name: item["full_name"],
            language: language["language"]
          };
        }
      }
    }
    return this.translations;
  }
  async get_verse(translation, book_id, chapter, verse) {
    let chapter_data = await this.get_chapter_cached(
      translation,
      book_id,
      chapter
    );
    return chapter_data[verse - 1] || "";
  }
  async get_verse_count(translation) {
    let json = JSON.parse(await httpGet(
      "https://bolls.life/get-verse-counts/{0}/".format(translation)
    ));
    let counts = new VerseCounts();
    counts.books = json;
    return counts;
  }
};
var ErrorModal = class extends import_obsidian.Modal {
  constructor(app, plugin, title, body) {
    super(app);
    this.plugin = plugin;
    this.title = title;
    this.body = body;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: this.title });
    contentEl.createEl("span", { text: this.body });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Close").onClick(() => {
        this.close();
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ClearCacheFilesModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let bible_path = this.plugin.settings.bible_folder;
    contentEl.createEl("h1", { text: "Clear cache?" });
    contentEl.createEl("span", {
      text: "You are about to clear out all cached chapters from your file system. This includes translations you manually downloaded.".format(bible_path)
    });
    contentEl.createEl("p", {
      text: "Do you want to clear the cache?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Clear cache").setCta().onClick(async () => {
        this.close();
        await this.plugin.bible_api.clear_cache();
        new import_obsidian.Notice("Cache cleared!");
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ClearOldBibleFilesModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let bible_path = this.plugin.settings.bible_folder;
    contentEl.createEl("h1", { text: "Bible folder is not empty" });
    contentEl.createEl("span", {
      text: "The Bible folder in your settings is not empty. If you built a Bible in this folder before the new bible may be interlaced with the old one.".format(bible_path)
    });
    contentEl.createEl("p", {
      text: "Do you want to clear the folder before building your Bible?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Build without clearing").setCta().onClick(async () => {
        this.close();
        new import_obsidian.Notice(BUILD_START_TOAST);
        await this.plugin.build_bible(bible_path);
        new import_obsidian.Notice(BUILD_END_TOAST);
      })
    ).addButton(
      (btn) => btn.setButtonText("Clear and build").setCta().onClick(async () => {
        this.close();
        new import_obsidian.Notice(BUILD_START_TOAST);
        let list = await this.app.vault.adapter.list(bible_path);
        for (let path of list.files) {
          let abstract = this.app.vault.getAbstractFileByPath(
            path
          );
          if (abstract != null) {
            await this.app.vault.delete(abstract, true);
          }
        }
        for (let path of list.folders) {
          let abstract = this.app.vault.getAbstractFileByPath(
            path
          );
          if (abstract != null) {
            await this.app.vault.delete(abstract, true);
          }
        }
        await this.plugin.build_bible(bible_path);
        new import_obsidian.Notice(BUILD_END_TOAST);
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var DownloadBibleModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let translation = this.plugin.settings.translation;
    contentEl.createEl("h1", { text: "Download bible?" });
    contentEl.createEl("span", {
      text: "You are about to download the entire {0} translation of the Bible, according to your settings.".format(translation)
    });
    contentEl.createEl("p", {
      text: "Do you want to continue?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Download").setCta().onClick(() => {
        this.close();
        this.downloadBible(translation);
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  async downloadBible(translation) {
    new import_obsidian.Notice(
      "Started download of the {0} translation!".format(translation)
    );
    let bible = await this.plugin.bible_api.get_translation(translation);
    for (const book_id in bible.books) {
      for (let chapter of Array(bible.books[book_id].length).keys()) {
        await this.plugin.bible_api.cache_chapter(
          translation,
          Number(book_id),
          chapter + 1,
          bible.books[book_id][chapter],
          true
        );
      }
    }
    new import_obsidian.Notice(
      "Completed download of the {0} translation!".format(translation)
    );
  }
};
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Translation").setDesc("The version of the Bible to display.").addDropdown(async (drop) => {
      let translations = await this.plugin.bible_api.get_translations();
      for (const key in translations) {
        drop.addOption(
          key,
          "{0} - {1} - {2}".format(
            translations[key].language,
            key,
            translations[key].display_name
          )
        );
      }
      drop.onChange(async (value) => {
        this.plugin.settings.translation = value;
        await this.plugin.saveSettings();
      });
      drop.setValue(this.plugin.settings.translation);
    });
    new import_obsidian.Setting(containerEl).setName("Bible folder").setDesc("A path to the folder where all the files for the bible will be placed. If the path does not exist it will be created.").addText(
      (text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.bible_folder).setValue(this.plugin.settings.bible_folder).onChange(async (value) => {
        this.plugin.settings.bible_folder = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setHeading().setName("Book Formatting");
    new import_obsidian.Setting(containerEl).setName("Book name capitalization").setDesc("Capitalization for the names of the notes of each book.").addDropdown(
      (drop) => drop.addOption("lower_case", "Lower case").addOption("name_case", "Name case").addOption("upper_case", "Upper case").setValue(this.plugin.settings.book_name_capitalization).onChange(async (value) => {
        this.plugin.settings.book_name_capitalization = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Abbreviate book names").setDesc('Abbreviates book names to three letters so that, for example, "Genesis" becomes "Gen" and "1 Kings" becomes "1Ki". (May cause issues in some languages)').addToggle((toggle) => toggle.setValue(this.plugin.settings.book_name_abbreviated).onChange(async (value) => {
      this.plugin.settings.book_name_abbreviated = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Padded order numbers").setDesc('When ON, changes "{order}" in the names of book folders to be padded with extra zeros. For example, "1 Genesis" would become "01 Gensis" when turned ON.').addToggle((toggle) => toggle.setValue(this.plugin.settings.padded_order).onChange(async (value) => {
      this.plugin.settings.padded_order = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Book name delimiter").setDesc('The characters separating words in book names, such as the spaces in "1 John" or "Song of Solomon".').addText((text) => text.setPlaceholder('Example: "' + DEFAULT_SETTINGS.book_name_format + '"').setValue(this.plugin.settings.book_name_delimiter).onChange(async (value) => {
      this.plugin.settings.book_name_delimiter = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Book name format").setDesc('Formatting for the names of the folders of each book of the bible. For example, "{order} {name}" would become "2 Exodus". Leave blank to not have folders for each book.').addText((text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.book_name_format).setValue(this.plugin.settings.book_name_format).onChange(async (value) => {
      this.plugin.settings.book_name_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setHeading().setName("Chapter Formatting");
    new import_obsidian.Setting(containerEl).setName("Padded chapter numbers").setDesc('When ON, changes "{chapter}" (and related) in the names of chapters to be padded with extra zeros. For example, "Psalms 5" would become "Psalms 005" when turned ON.').addToggle((toggle) => toggle.setValue(this.plugin.settings.padded_chapter).onChange(async (value) => {
      this.plugin.settings.padded_chapter = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Chapter name format").setDesc('Formatting for the names of the notes of each chapter of a book. For example, "{book} {chapter}" would become "Psalms 23.md".').addText((text) => text.setPlaceholder(this.plugin.settings.chapter_name_format).setValue(this.plugin.settings.chapter_name_format).onChange(async (value) => {
      this.plugin.settings.chapter_name_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Chapter body format").setDesc("Formatting for the body of chapter notes.").addTextArea((text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.chapter_body_format).setValue(this.plugin.settings.chapter_body_format).onChange(async (value) => {
      this.plugin.settings.chapter_body_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setHeading().setName("Verse Formatting");
    new import_obsidian.Setting(containerEl).setName("Build with dynamic verses").setDesc("When ON, the text of verses will be saved as verse references that are loaded as you read it. When OFF, saves the text for your current translation into the built files.").addToggle((toggle) => toggle.setValue(this.plugin.settings.build_with_dynamic_verses).onChange(async (value) => {
      this.plugin.settings.build_with_dynamic_verses = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Verse body format").setDesc("Formatting for the body of verses in chapters.").addTextArea((text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.verse_body_format).setValue(this.plugin.settings.verse_body_format).onChange(async (value) => {
      this.plugin.settings.verse_body_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setHeading().setName("Data");
    new import_obsidian.Setting(containerEl).setName("Save bible locally").setDesc("When ON, caches viewed chapters on the local file system, so that they can be accessed without an internet connection.").addToggle((toggle) => toggle.setValue(this.plugin.settings.store_locally).onChange(async (value) => {
      this.plugin.settings.store_locally = value;
      await this.plugin.saveSettings();
    }));
  }
};
var DEFAULT_NAME_MAP = {
  "Genesis": 1,
  "Exodus": 2,
  "Leviticus": 3,
  "Numbers": 4,
  "Deuteronomy": 5,
  "Joshua": 6,
  "Judges": 7,
  "Ruth": 8,
  "1 Samuel": 9,
  "2 Samuel": 10,
  "1 Kings": 11,
  "2 Kings": 12,
  "1 Chronicles": 13,
  "2 Chronicles": 14,
  "Ezra": 15,
  "Nehemiah": 16,
  "Esther": 17,
  "Job": 18,
  "Psalms": 19,
  "Psalm": 19,
  // Alternate spelling
  "Proverbs": 20,
  "Ecclesiastes": 21,
  "Song of Solomon": 22,
  "Isaiah": 23,
  "Jeremiah": 24,
  "Lamentations": 25,
  "Ezekiel": 26,
  "Daniel": 27,
  "Hosea": 28,
  "Joel": 29,
  "Amos": 30,
  "Obadiah": 31,
  "Jonah": 32,
  "Micah": 33,
  "Nahum": 34,
  "Habakkuk": 35,
  "Zephaniah": 36,
  "Haggai": 37,
  "Zechariah": 38,
  "Malachi": 39,
  "Matthew": 40,
  "Mark": 41,
  "Luke": 42,
  "John": 43,
  "Acts": 44,
  "Romans": 45,
  "1 Corinthians": 46,
  "2 Corinthians": 47,
  "Galatians": 48,
  "Ephesians": 49,
  "Philippians": 50,
  "Colossians": 51,
  "1 Thessalonians": 52,
  "2 Thessalonians": 53,
  "1 Timothy": 54,
  "2 Timothy": 55,
  "Titus": 56,
  "Philemon": 57,
  "Hebrews": 58,
  "James": 59,
  "1 Peter": 60,
  "2 Peter": 61,
  "1 John": 62,
  "2 John": 63,
  "3 John": 64,
  "Jude": 65,
  "Revelation": 66,
  "1 Esdras": 67,
  "Tobit": 68,
  "Judith": 69,
  "Wisdom": 70,
  "Sirach": 71,
  "Epistle of Jeremiah": 72,
  "Baruch": 73,
  "1 Maccabees": 74,
  "2 Maccabees": 75,
  "2 Esdras": 77,
  // Jump in number
  "Susanna": 78,
  "Bel and Dragon": 79,
  "Prayer of Manasseh": 83,
  // Jump in number
  "Azariah": 88
  // Jump in number
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJub2RlX21vZHVsZXMvYXN5bmMtbXV0ZXgvaW5kZXgubWpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuXHRBcHAsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0VEZpbGUsXG5cdFRGb2xkZXIsXG5cdG5vcm1hbGl6ZVBhdGgsXG5cdHJlcXVlc3RVcmwsXG59IGZyb20gJ29ic2lkaWFuJztcblxuaW1wb3J0IHsgRV9DQU5DRUxFRCwgTXV0ZXggfSBmcm9tICdhc3luYy1tdXRleCc7XG5cbmNvbnN0IEJVSUxEX1NUQVJUX1RPQVNUID0gXCJCaWJsZSBidWlsZCBzdGFydGVkIVwiO1xuY29uc3QgQlVJTERfRU5EX1RPQVNUID0gXCJCaWJsZSBidWlsZCBmaW5pc2hlZCFcIjtcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmNsYXNzIE15QmlibGVTZXR0aW5ncyB7XG5cdHRyYW5zbGF0aW9uOiBzdHJpbmc7XG5cdGJpYmxlX2ZvbGRlcjogc3RyaW5nO1xuXG5cdHN0b3JlX2xvY2FsbHk6IGJvb2xlYW47XG5cblx0cGFkZGVkX29yZGVyOiBib29sZWFuO1xuXHRib29rX25hbWVfZm9ybWF0OiBzdHJpbmc7XG5cdGJvb2tfbmFtZV9kZWxpbWl0ZXI6IHN0cmluZztcblx0Ym9va19uYW1lX2NhcGl0YWxpemF0aW9uOiBzdHJpbmc7XG5cdGJvb2tfbmFtZV9hYmJyZXZpYXRlZDogYm9vbGVhbjtcblxuXHRwYWRkZWRfY2hhcHRlcjogYm9vbGVhbjtcblx0Y2hhcHRlcl9uYW1lX2Zvcm1hdDogc3RyaW5nO1xuXHRjaGFwdGVyX2JvZHlfZm9ybWF0OiBzdHJpbmc7XG5cblx0YnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlczogYm9vbGVhbjtcblx0dmVyc2VfYm9keV9mb3JtYXQ6IHN0cmluZztcblxuXHRfYnVpbHRfdHJhbnNsYXRpb246IHN0cmluZztcblxuXHRhc3luYyBzZXRfdHJhbnNsYXRpb24odmFsOiBzdHJpbmcsIHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdGxldCBoYXNfdHJhbnNsYXRpb24gPSBmYWxzZTtcblx0XHRsZXQgdHJhbnNsYXRpb25zID0gKGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpKTtcblx0XHRpZiAoISh2YWwgaW4gdHJhbnNsYXRpb25zKSkge1xuXHRcdFx0Zm9yIChsZXQgdHJhbnNsYXRpb24gaW4gdHJhbnNsYXRpb25zKSB7XG5cdFx0XHRcdHRoaXMudHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvblxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRyYW5zbGF0aW9uID0gdmFsO1xuXHRcdH1cblx0fVxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeUJpYmxlU2V0dGluZ3MgPSB7XG5cdHRyYW5zbGF0aW9uOiBcIlwiLFxuXHRiaWJsZV9mb2xkZXI6IFwiL0JpYmxlL1wiLFxuXHRib29rX25hbWVfZm9ybWF0OiBcIntvcmRlcn0ge2Jvb2t9XCIsXG5cdGJvb2tfbmFtZV9kZWxpbWl0ZXI6IFwiIFwiLFxuXHRjaGFwdGVyX25hbWVfZm9ybWF0OiBcIntvcmRlcn0ge2Jvb2t9IHtjaGFwdGVyfVwiLFxuXHRib29rX25hbWVfY2FwaXRhbGl6YXRpb246IFwibmFtZV9jYXNlXCIsXG5cdGJvb2tfbmFtZV9hYmJyZXZpYXRlZDogZmFsc2UsXG5cdHBhZGRlZF9vcmRlcjogdHJ1ZSxcblx0cGFkZGVkX2NoYXB0ZXI6IGZhbHNlLFxuXHRidWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzOiB0cnVlLFxuXHR2ZXJzZV9ib2R5X2Zvcm1hdDogXCIjIyMjIyMge3ZlcnNlfVxcblwiXG5cdFx0KyBcInt2ZXJzZV90ZXh0fVwiLFxuXHRjaGFwdGVyX2JvZHlfZm9ybWF0OiBcIlxcblwiXG5cdFx0KyBcIiMjIyMjIyBbW3tmaXJzdF9jaGFwdGVyX25hbWV9fHtib29rfSAxIFx1MjNFRV1dIHwgW1t7bGFzdF9jaGFwdGVyX25hbWV9fHtsYXN0X2NoYXB0ZXJfYm9va30ge2xhc3RfY2hhcHRlcn0gXHUyNUMwXV0gfCBbW3tib29rfV1dIHwgW1t7bmV4dF9jaGFwdGVyX25hbWV9fFx1MjVCNiB7bmV4dF9jaGFwdGVyX2Jvb2t9IHtuZXh0X2NoYXB0ZXJ9XV0gfCBbW3tmaW5hbF9jaGFwdGVyX25hbWV9fFx1MjNFRCB7Ym9va30ge2ZpbmFsX2NoYXB0ZXJ9fF1dXFxuXCJcblx0XHQrIFwiXFxuXCJcblx0XHQrIFwie3ZlcnNlc31cXG5cIlxuXHRcdCsgXCJcXG5cIlxuXHRcdCsgXCIjIyMjIyMgW1t7Zmlyc3RfY2hhcHRlcl9uYW1lfXx7Ym9va30gMSBcdTIzRUVdXSB8IFtbe2xhc3RfY2hhcHRlcl9uYW1lfXx7bGFzdF9jaGFwdGVyX2Jvb2t9IHtsYXN0X2NoYXB0ZXJ9IFx1MjVDMF1dIHwgW1t7Ym9va31dXSB8IFtbe25leHRfY2hhcHRlcl9uYW1lfXxcdTI1QjYge25leHRfY2hhcHRlcl9ib29rfSB7bmV4dF9jaGFwdGVyfV1dIHwgW1t7ZmluYWxfY2hhcHRlcl9uYW1lfXxcdTIzRUQge2Jvb2t9IHtmaW5hbF9jaGFwdGVyfXxdXVxcblwiXG5cdFx0KyBcIlxcblwiLFxuXHRzdG9yZV9sb2NhbGx5OiBmYWxzZSxcblxuXHRfYnVpbHRfdHJhbnNsYXRpb246IFwiXCIsXG5cblx0c2V0X3RyYW5zbGF0aW9uOiBhc3luYyBmdW5jdGlvbiAodmFsOiBzdHJpbmcsIHBsdWdpbjogTXlCaWJsZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBoYXNfdHJhbnNsYXRpb24gPSBmYWxzZTtcblx0XHRsZXQgdHJhbnNsYXRpb25zID0gKGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpKTtcblx0XHRpZiAoISh2YWwgaW4gdHJhbnNsYXRpb25zKSkge1xuXHRcdFx0dGhpcy50cmFuc2xhdGlvbiA9IGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X2RlZmF1bHRfdHJhbnNsYXRpb24oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50cmFuc2xhdGlvbiA9IHZhbDtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gaHR0cEdldCh0aGVVcmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAob2ssIGVycikgPT4ge1xuXHRcdG9rKGF3YWl0IHJlcXVlc3RVcmwodGhlVXJsKS50ZXh0KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGlzX2FscGhhKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGNoYXJfc3RyIG9mIHN0cmluZykge1xuXHRcdGxldCBjaGFyID0gY2hhcl9zdHIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNoYXIgPiA2NCAmJiBjaGFyIDwgOTEpIHx8IChjaGFyID4gOTYgJiYgY2hhciA8IDEyMykgfHwgKGNoYXIgPiAzOSAmJiBjaGFyIDwgNDIpKSB7XG5cdFx0XHQvLyBDaGFyYWN0ZXIgaXMgYSBjYXBpdGFsIG9yIGxvd2VyY2FzZSBsZXR0ZXIsIGNvbnRpbnVlXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Ly8gQ2hhcmFjdGVyIGlzIG5vdCBhIGNhcGl0YWwgb3IgbG93ZXJjYXNlIGxldHRlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgdXBwZXJjYXNlIG9yIGxvd2VyY2FzZSBsZXR0ZXJzLCByZXR1cm4gdHJ1ZVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNfYWxwaGFudW1lcmljKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGNoYXJfc3RyIG9mIHN0cmluZykge1xuXHRcdGxldCBjaGFyID0gY2hhcl9zdHIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNoYXIgPiA2NCAmJiBjaGFyIDwgOTEpIHx8IChjaGFyID4gOTYgJiYgY2hhciA8IDEyMykgfHwgKGNoYXIgPiA0NyAmJiBjaGFyIDwgNTgpKSB7XG5cdFx0XHQvLyBDaGFyYWN0ZXIgaXMgYSBjYXBpdGFsIG9yIGxvd2VyY2FzZSBsZXR0ZXIsIGNvbnRpbnVlXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Ly8gQ2hhcmFjdGVyIGlzIG5vdCBhIGNhcGl0YWwgb3IgbG93ZXJjYXNlIGxldHRlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgdXBwZXJjYXNlIG9yIGxvd2VyY2FzZSBsZXR0ZXJzLCByZXR1cm4gdHJ1ZVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNfbnVtZXJpYyhzdHJpbmc6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRmb3IgKGxldCBjaGFyX3N0ciBvZiBzdHJpbmcpIHtcblx0XHRsZXQgY2hhciA9IGNoYXJfc3RyLmNoYXJDb2RlQXQoMCk7XG5cdFx0aWYgKGNoYXIgPiA0NyAmJiBjaGFyIDwgNTgpIHtcblx0XHRcdC8vIENoYXJhY3RlciBpcyBhIG51bWJlciwgY29udGludWVcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHQvLyBDaGFyYWN0ZXIgaXMgbm90IG51bWJlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgbnVtYmVycywgcmV0dXJuIHRydWVcblx0cmV0dXJuIHRydWU7XG59XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeUJpYmxlIGV4dGVuZHMgUGx1Z2luIHtcblx0YmlibGVfYXBpOiBCaWJsZUFQSTtcblx0c2V0dGluZ3M6IE15QmlibGVTZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYmlibGVfYXBpID0gbmV3IEJvbGxzTGlmZUJpYmxlQVBJKCk7XG5cdFx0dGhpcy5iaWJsZV9hcGkucGx1Z2luID0gdGhpcztcblxuXHRcdGF3YWl0IHRoaXMuc2V0dGluZ3Muc2V0X3RyYW5zbGF0aW9uKHRoaXMuc2V0dGluZ3MudHJhbnNsYXRpb24sIHRoaXMpO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2ltcGxlIGNvbW1hbmQgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGFueXdoZXJlXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY3JlYXRlX2JpYmxlX2ZpbGVzJyxcblx0XHRcdG5hbWU6ICdCdWlsZCBiaWJsZScsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRsZXQgYmlibGVfcGF0aCA9IG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpO1xuXG5cdFx0XHRcdGxldCBiaWJsZV9mb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmlibGVfcGF0aCk7XG5cdFx0XHRcdGlmIChiaWJsZV9mb2xkZXIgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdC8vIENhbid0IGhhbmRsZSBpZiBiaWJsZSBwYXRoIGlzIGEgZmlsZS4gQWJvcnRcblx0XHRcdFx0XHRuZXcgRXJyb3JNb2RhbChcblx0XHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRcdFwiRmFpbGVkIHRvIGJ1aWxkIGJpYmxlXCIsXG5cdFx0XHRcdFx0XHRcIlRoZSBiaWJsZSBmb2xkZXIgZGVmaW5lZCBpbiBzZXR0aW5ncywgXFxcInswfVxcXCIsIHdhcyBleHBlY3RlZCB0byBwb2ludCB0byBhIGZvbGRlciwgYnV0IGl0IHBvaW50cyB0byBhIGZpbGUuIFRyeSBjaGFuZ2luZyB0aGUgcGF0aCB0byBwb2ludCB0byBhIGZvbGRlciwgb3IgY2hhbmdlIHRoZSBmaWxlIHRvIGEgZm9sZGVyLlwiXG5cdFx0XHRcdFx0XHRcdC5mb3JtYXQodGhpcy5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpLFxuXHRcdFx0XHRcdCkub3BlbigpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmIChiaWJsZV9mb2xkZXIgPT09IG51bGwpIHtcblx0XHRcdFx0XHQvLyBCaWJsZSBwYXRoIGRvZXNuJ3QgZXhpc3QuIENyZWF0ZSBpdFxuXHRcdFx0XHRcdHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoYmlibGVfcGF0aCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQmlibGUgcGF0aCBpcyBhbHJlYWR5IGEgdmFsaWQgZm9sZGVyLiBObyBhY3Rpb24gbmVlZGVkXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgZm9sZGVyc19hbmRfZmlsZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QoYmlibGVfcGF0aCk7XG5cdFx0XHRcdGlmIChmb2xkZXJzX2FuZF9maWxlcy5maWxlcy5sZW5ndGggKyBmb2xkZXJzX2FuZF9maWxlcy5mb2xkZXJzLmxlbmd0aCAhPSAwKSB7XG5cdFx0XHRcdFx0bmV3IENsZWFyT2xkQmlibGVGaWxlc01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShCVUlMRF9TVEFSVF9UT0FTVCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5idWlsZF9iaWJsZShiaWJsZV9wYXRoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKEJVSUxEX0VORF9UT0FTVCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NsZWFyX2NhY2hlJyxcblx0XHRcdG5hbWU6ICdDbGVhciBjYWNoZScsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ2xlYXJDYWNoZUZpbGVzTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2Rvd25sb2FkX2JpYmxlJyxcblx0XHRcdG5hbWU6ICdEb3dubG9hZCB0cmFuc2xhdGlvbicsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHQvLyBUT0RPOiBPcGVuIGEgZGlhbG9ndWUgdG8gY29uZmlybSBkb3dubG9hZGluZyBhbiBlbnRpcmUgYmlibGVcblx0XHRcdFx0bmV3IERvd25sb2FkQmlibGVNb2RhbChcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHQpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcInZlcnNlXCIsIGFzeW5jIChzb3VyY2UsIGVsZW1lbnQsIGNvbnRleHQpID0+IHtcblx0XHRcdGNvbnN0IHJlZiA9IHNvdXJjZS50cmltKCkucmVwbGFjZSgvWzotXS9nLCBcIiBcIikuc3BsaXQoXCIgXCIpO1xuXG5cdFx0XHRsZXQgYm9vazpzdHJpbmd8bnVsbCA9IG51bGw7XG5cdFx0XHRsZXQgYm9va19pZCA9IC0xO1xuXHRcdFx0bGV0IGNoYXB0ZXIgPSAtMTtcblx0XHRcdGxldCB2ZXJzZSA9IC0xO1xuXHRcdFx0bGV0IHZlcnNlX2VuZCA9IC0xO1xuXHRcdFx0bGV0IG1heWJlX3RyYW5zbGF0aW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRcdGxldCBpID0gMDtcblxuXHRcdFx0d2hpbGUgKGkgIT0gcmVmLmxlbmd0aCkge1xuXHRcdFx0XHQvLyBDb21wb3NlIGJvb2sgbmFtZVxuXHRcdFx0XHRpZiAoaSA9PSAwKSB7XG5cdFx0XHRcdFx0Ly8gQWx3YXlzIGFkZCBmaXJzdCBpdGVtLCBubyBtYXR0ZXIgd2hhdCBpdCBpc1xuXHRcdFx0XHRcdGJvb2sgPSAoYm9vayB8fCBcIlwiKSArIHJlZltpXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBPbmx5IGFkZCBpdGVtcyB0aGF0IGFyZSB3b3JkcywgYW5kIG5vdCBudW1iZXJzXG5cdFx0XHRcdFx0aWYgKCFpc19hbHBoYShyZWZbaV0pKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ym9vayArPSBcIiBcIiArIHJlZltpXVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSArPSAxO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGlzX251bWVyaWMoYm9vayB8fCBcIlwiKSkge1xuXHRcdFx0XHQvLyBDb21wb3NlIGJvb2tfaWRcblx0XHRcdFx0Ym9va19pZCA9IE51bWJlcihib29rKTtcblx0XHRcdFx0Ym9vayA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpICE9IHJlZi5sZW5ndGggJiYgaXNfbnVtZXJpYyhyZWZbaV0pKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgY2hhcHRlclxuXHRcdFx0XHRjaGFwdGVyID0gTnVtYmVyKHJlZltpXSk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGkgIT0gcmVmLmxlbmd0aCAmJiBpc19udW1lcmljKHJlZltpXSkpIHtcblx0XHRcdFx0Ly8gQ29tcG9zZSB2ZXJzZVxuXHRcdFx0XHR2ZXJzZSA9IE51bWJlcihyZWZbaV0pO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpICE9IHJlZi5sZW5ndGggJiYgaXNfbnVtZXJpYyhyZWZbaV0pKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgcmFuZ2Vcblx0XHRcdFx0dmVyc2VfZW5kID0gTnVtYmVyKHJlZltpXSk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGkgIT0gcmVmLmxlbmd0aCAmJiBpc19hbHBoYW51bWVyaWMocmVmW2ldKSkge1xuXHRcdFx0XHQvLyBDb21wb3NlIHRyYW5zbGF0aW9uXG5cdFx0XHRcdG1heWJlX3RyYW5zbGF0aW9uID0gcmVmW2ldO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cblx0XHRcdGxldCB0cmFuc2xhdGlvbiA9IG1heWJlX3RyYW5zbGF0aW9uIHx8IHRoaXMuc2V0dGluZ3MudHJhbnNsYXRpb247XG5cdFx0XHRpZiAoYm9vayAhPT0gbnVsbCkge1xuXHRcdFx0XHRib29rX2lkID0gYXdhaXQgdGhpcy5iaWJsZV9hcGlcblx0XHRcdFx0XHQuYm9va19pZCh0aGlzLnNldHRpbmdzLl9idWlsdF90cmFuc2xhdGlvbnx8dHJhbnNsYXRpb24sIGJvb2spO1xuXHRcdFx0fVxuXHRcdFx0Ym9vayA9IChhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfYm9vayh0cmFuc2xhdGlvbiwgYm9va19pZCkpLm5hbWU7XG5cdFx0XHRcblx0XHRcdGxldCB0ZXh0ID0gXCJcIjtcblx0XHRcdGlmIChib29rLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0ZXh0ID0gXCJbQm9vayBhbmQgY2hhcHRlciBtdXN0IGJlIHByb3ZpZGVkXVwiO1xuXHRcdFx0fSBlbHNlIGlmIChjaGFwdGVyID09PSAtMSkge1xuXHRcdFx0XHR0ZXh0ID0gXCJbQ2hhcHRlciBtdXN0IGJlIHByb3ZpZGVkXVwiO1xuXHRcdFx0fSBlbHNlIGlmICh2ZXJzZSA9PT0gLTEpIHtcblx0XHRcdFx0Ly8gV2hvbGUgY2hhcHRlclxuXHRcdFx0XHRsZXQgdmVyc2VzID0gYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X2NoYXB0ZXJfY2FjaGVkKFxuXHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0KTtcblx0XHRcdFx0Zm9yIChsZXQgdmVyc2VfaSBvZiB2ZXJzZXMua2V5cygpKSB7XG5cdFx0XHRcdFx0bGV0IHZlcnNlID0gdmVyc2VzW3ZlcnNlX2ldO1xuXHRcdFx0XHRcdHRleHQgKz0gXCI8c3VwPlwiICsgKHZlcnNlX2kgKyAxKSArIFwiPC9zdXA+IFwiICsgdmVyc2U7XG5cdFx0XHRcdFx0aWYgKHZlcnNlX2kgIT0gdmVyc2VzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdHRleHQgKz0gXCI8YnI+XCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHRleHQgPSBcIltDb3VsZCBub3QgZmluZCB0ZXh0IGZvciB0aGUgYm9vayAnezF9JywgdHJhbnNsYXRpb24gJ3syfScsIGNoYXB0ZXIgezB9XVwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgdHJhbnNsYXRpb24pXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodmVyc2VfZW5kIDwgdmVyc2UpIHtcblx0XHRcdFx0Ly8gU2luZ2xlIHZlcnNlXG5cdFx0XHRcdHRleHQgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfdmVyc2UoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHRcdHZlcnNlLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAodGV4dC5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHR0ZXh0ID0gXCJbQ291bGQgbm90IGZpbmQgdGV4dCBmb3IgdGhlIGJvb2sgJ3sxfScsIHRyYW5zbGF0aW9uICd7M30nLCBjaGFwdGVyIHswfSwgdmVyc2UgezJ9XVwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgU3RyaW5nKHZlcnNlKSwgdHJhbnNsYXRpb24pXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFZlcnNlIHJhbmdlXG5cdFx0XHRcdGxldCB2ZXJzZXMgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfY2hhcHRlcl9jYWNoZWQoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRsZXQgaiA9IHZlcnNlO1xuXHRcdFx0XHR3aGlsZSAoaiA8IHZlcnNlX2VuZCArIDEgJiYgaiA8IHZlcnNlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHR0ZXh0ICs9IFwiPHN1cD5cIiArIGogKyBcIjwvc3VwPiBcIiArIHZlcnNlc1tqIC0gMV07XG5cdFx0XHRcdFx0aWYgKGogIT0gdmVyc2VfZW5kKSB7XG5cdFx0XHRcdFx0XHR0ZXh0ICs9IFwiPGJyPlwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRqICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRleHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0dGV4dCA9IFwiW0NvdWxkIG5vdCBmaW5kIHRleHQgZm9yIHRoZSBib29rICd7MX0nLCB0cmFuc2xhdGlvbiAnezR9JywgY2hhcHRlciB7MH0sIHZlcnNlcyB7Mn0tezN9XVwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgU3RyaW5nKHZlcnNlKSwgU3RyaW5nKHZlcnNlX2VuZCksIHRyYW5zbGF0aW9uKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGxldCBzcGFuID0gZWxlbWVudC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogXCJcIixcblx0XHRcdH0pO1xuXG5cdFx0XHRsZXQgdGFncyA9IHRleHQubWF0Y2hBbGwoXG5cdFx0XHRcdC8oPzo8XFxzKihbXFx3XSopXFxzKj4oLio/KTxcXHMqXFwvXFwxXFxzKj4pfDxcXHMqKGJyfFxcL2JyfGJyXFwvKVxccyo+fCguKz8oPzooPz08XFxzKlsvXFxcXFxcd10qXFxzKj4pfCQpKS9nc1xuXHRcdFx0KTtcblx0XHRcdGZvciAobGV0IG1hdGNoIG9mIHRhZ3MpIHtcblx0XHRcdFx0bGV0IHRhZ190eXBlID0gbWF0Y2hbMV07XG5cdFx0XHRcdGxldCB0YWdfdGV4dCA9IG1hdGNoWzJdO1xuXHRcdFx0XHRsZXQgbG9uZV90YWdfdHlwZSA9IG1hdGNoWzNdO1xuXHRcdFx0XHRsZXQgbm9ybWFsX3RleHQgPSBtYXRjaFs0XTtcblxuXHRcdFx0XHRpZiAobm9ybWFsX3RleHQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0XHR0ZXh0OiBub3JtYWxfdGV4dCxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIGlmIChsb25lX3RhZ190eXBlID09PSBcImJyXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKGxvbmVfdGFnX3R5cGUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGxvbmVfdGFnX3R5cGUgPT09IFwiYnIvXCIgfHwgbG9uZV90YWdfdHlwZSA9PT0gXCIvYnJcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwoXCJiclwiKTtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHRcdFx0dGV4dDogXCJcXG5cIixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIGlmIChsb25lX3RhZ190eXBlID09PSBcIi9KXCIpIHtcblx0XHRcdFx0XHQvKiBEbyBub3RoaW5nICovXG5cdFx0XHRcdH0gZWxzZSBpZiAodGFnX3R5cGUgPT09IFwic3VwXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKHRhZ190eXBlLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRhZ190eXBlID09PSBcInN1YlwiKSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVFbCh0YWdfdHlwZSwgeyB0ZXh0OiB0YWdfdGV4dCB9KTtcblx0XHRcdFx0fSBlbHNlIGlmICh0YWdfdHlwZSA9PT0gXCJTXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKFxuXHRcdFx0XHRcdFx0XCJzdWJcIixcblx0XHRcdFx0XHRcdHsgdGV4dDogdGFnX3RleHQsIGF0dHI6IHsgc3R5bGU6IFwib3BhY2l0eTogMC41XCIgfSB9LFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGFnX3R5cGUgPT09IFwiaVwiKSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVFbCh0YWdfdHlwZSwgeyB0ZXh0OiB0YWdfdGV4dCB9KTtcblx0XHRcdFx0fSBlbHNlIGlmICh0YWdfdHlwZSA9PT0gXCJiXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKHRhZ190eXBlLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRhZ190eXBlID09PSBcImVcIikge1xuXHRcdFx0XHRcdC8vLyBBIHF1b3RlIGZyb20gZnJvbSBlbHNld2hlcmUgaW4gdGhlIGJpYmxlLlxuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwoXCJpXCIpLmNyZWF0ZUVsKFwicVwiLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlU3Bhbihcblx0XHRcdFx0XHRcdHsgdGV4dDogXCI8ezB9PnsxfTwvezB9PlwiLmZvcm1hdCh0YWdfdHlwZSwgdGFnX3RleHQpIH0sXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBidWlsZF9iaWJsZShiaWJsZV9wYXRoOiBzdHJpbmcpIHtcblx0XHQvLyBUT0RPOiBCdWlsZCBiaWJsZXMgYWNjb3JkaW5nIHRvIHRyYW5zbGF0aW9uIGluIHNldHRpbmdzXG5cdFx0dGhpcy5zZXR0aW5ncy5fYnVpbHRfdHJhbnNsYXRpb24gPSB0aGlzLnNldHRpbmdzLnRyYW5zbGF0aW9uO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XG5cdFx0bGV0IGN0eCA9IG5ldyBCdWlsZENvbnRleHQ7XG5cdFx0Y3R4LnRyYW5zbGF0aW9uID0gdGhpcy5zZXR0aW5ncy5fYnVpbHRfdHJhbnNsYXRpb247XG5cdFx0Y3R4LmJvb2tzID0gYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X2Jvb2tzKFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5fYnVpbHRfdHJhbnNsYXRpb25cblx0XHQpO1xuXHRcdGN0eC52ZXJzZV9jb3VudHMgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfdmVyc2VfY291bnQoY3R4LnRyYW5zbGF0aW9uKTtcblxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5idWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzKSB7XG5cdFx0XHRjdHgudHJhbnNsYXRpb25fdGV4dHMgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaVxuXHRcdFx0XHQuZ2V0X3RyYW5zbGF0aW9uKGN0eC50cmFuc2xhdGlvbik7XG5cdFx0fVxuXG5cdFx0Zm9yIChsZXQgYm9vayBvZiBjdHguYm9va3MpIHtcblx0XHRcdGN0eC5zZXRfYm9vayhib29rLmlkKTtcblxuXHRcdFx0Ly8gQm9vayBwYXRoXG5cdFx0XHRsZXQgYm9va19wYXRoID0gYmlibGVfcGF0aDtcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmJvb2tfbmFtZV9mb3JtYXQubGVuZ3RoICE9IDApIHtcblx0XHRcdFx0Ym9va19wYXRoICs9IFwiL1wiICsgY3R4LmZvcm1hdF9ib29rX25hbWUodGhpcywgY3R4LmJvb2ssIHRoaXMuc2V0dGluZ3MuYm9va19uYW1lX2NhcGl0YWxpemF0aW9uKTtcblx0XHRcdFx0dGhpcy5hcHAudmF1bHQuYWRhcHRlci5ta2Rpcihub3JtYWxpemVQYXRoKGJvb2tfcGF0aCkpO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgZmlsZV9wcm9taXNlczogQXJyYXk8UHJvbWlzZTxhbnk+PiA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyX2kgb2YgQXJyYXkoY3R4LmJvb2suY2hhcHRlcnMpLmtleXMoKSkge1xuXHRcdFx0XHRjdHguc2V0X2NoYXB0ZXIoY2hhcHRlcl9pKzEpO1xuXG5cdFx0XHRcdC8vIEFzc2VtYmxlIHZlcnNlc1xuXHRcdFx0XHRjdHgudmVyc2VzX3RleHQgPSBcIlwiO1xuXHRcdFx0XHRsZXQgdmVyc2UgPSAxO1xuXHRcdFx0XHR3aGlsZSAodmVyc2UgIT0gY3R4LmdldF92ZXJzZV9jb3VudCgpKzEpIHtcblx0XHRcdFx0XHRjdHgudmVyc2UgPSB2ZXJzZTtcblx0XHRcdFx0XHRjdHgudmVyc2VzX3RleHQgKz0gY3R4LmZvcm1hdF92ZXJzZV9ib2R5KFxuXHRcdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuYnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlcyxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmICh2ZXJzZSAhPSBjdHguZ2V0X3ZlcnNlX2NvdW50KCkpIHtcblx0XHRcdFx0XHRcdGN0eC52ZXJzZXNfdGV4dCArPSBcIlxcblwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR2ZXJzZSArPSAxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2hhcHRlciBuYW1lXG5cdFx0XHRcdGxldCBjaGFwdGVyX25vdGVfbmFtZSA9IGN0eC5mb3JtYXRfY2hhcHRlcl9uYW1lKHRoaXMpO1xuXG5cdFx0XHRcdC8vIENoYXB0ZXIgYm9keVxuXHRcdFx0XHRsZXQgbm90ZV9ib2R5ID0gY3R4LmZvcm1hdF9jaGFwdGVyX2JvZHkodGhpcyk7XG5cblx0XHRcdFx0Ly8gU2F2ZSBmaWxlXG5cdFx0XHRcdGxldCBmaWxlX3BhdGggPSBub3JtYWxpemVQYXRoKGJvb2tfcGF0aCArIFwiL1wiICsgY2hhcHRlcl9ub3RlX25hbWUgKyBcIi5tZFwiKTtcblx0XHRcdFx0bGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZV9wYXRoKTtcblx0XHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdGZpbGVfcHJvbWlzZXMucHVzaCh0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbm90ZV9ib2R5KSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZmlsZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdGZpbGVfcHJvbWlzZXMucHVzaChcblx0XHRcdFx0XHRcdHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShcblx0XHRcdFx0XHRcdFx0ZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0XHRub3RlX2JvZHksXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoZmlsZV9wcm9taXNlcyk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuY2xhc3MgQnVpbGRDb250ZXh0IHtcblx0dHJhbnNsYXRpb246IHN0cmluZ1xuXHR0cmFuc2xhdGlvbl90ZXh0czogVHJhbnNsYXRpb25EYXRhXG5cdGJvb2tzOiBBcnJheTxCb29rRGF0YT5cblx0Ym9vazogQm9va0RhdGFcblx0bGFzdF9ib29rOiBCb29rRGF0YVxuXHRuZXh0X2Jvb2s6IEJvb2tEYXRhXG5cdGNoYXB0ZXI6IG51bWJlclxuXHRsYXN0X2NoYXB0ZXI6IG51bWJlclxuXHRuZXh0X2NoYXB0ZXI6IG51bWJlclxuXHRjaGFwdGVyczogQ2hhcHRlckRhdGFcblx0bGFzdF9jaGFwdGVyczogQ2hhcHRlckRhdGFcblx0bmV4dF9jaGFwdGVyczogQ2hhcHRlckRhdGFcblx0Y2hhcHRlcl92ZXJzZV9jb3VudDogbnVtYmVyXG5cdHZlcnNlc190ZXh0OiBzdHJpbmdcblx0dmVyc2U6IG51bWJlclxuXHR2ZXJzZV9jb3VudHM6IFZlcnNlQ291bnRzXG5cblx0ZmluZF9ib29rKGJvb2tfaWQ6Qm9va0lkKTpudW1iZXIge1xuXHRcdGZvciAobGV0IGkgb2YgdGhpcy5ib29rcy5rZXlzKCkpIHtcblx0XHRcdGlmICh0aGlzLmJvb2tzW2ldLmlkID09PSBib29rX2lkKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyBib29rIGJ5IGlkICR7Ym9va19pZH1cIik7XG5cdH1cblxuXHRhYmJyZXZpYXRlX2Jvb2tfbmFtZShuYW1lOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5hbWUucmVwbGFjZShcIiBcIiwgXCJcIikuc2xpY2UoMCwzKTtcblx0fVxuXG5cdGZvcm1hdF9ib29rX25hbWUocGx1Z2luOk15QmlibGUsIGJvb2s6Qm9va0RhdGEsIGNhc2luZzpzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGxldCBkZWxpbSA9IHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZGVsaW1pdGVyO1xuXHRcdGxldCBib29rX25hbWUgPSB0aGlzLnRvX2Nhc2UoYm9vay5uYW1lLCBjYXNpbmcsIGRlbGltKTtcblxuXHRcdGlmIChwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2FiYnJldmlhdGVkKSB7XG5cdFx0XHRib29rX25hbWUgPSB0aGlzLmFiYnJldmlhdGVfYm9va19uYW1lKGJvb2tfbmFtZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZm9ybWF0XG5cdFx0XHQucmVwbGFjZShcblx0XHRcdFx0L3tvcmRlcn0vZyxcblx0XHRcdFx0U3RyaW5nKGJvb2suaWQpXG5cdFx0XHRcdFx0LnBhZFN0YXJ0KDIgKiBOdW1iZXIocGx1Z2luLnNldHRpbmdzLnBhZGRlZF9vcmRlciksIFwiMFwiKVxuXHRcdFx0KVxuXHRcdFx0LnJlcGxhY2UoL3tib29rfS9nLCBib29rX25hbWUpXG5cdH1cblxuXHRmb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luOk15QmlibGUsIGJvb2s6Qm9va0RhdGEsIGNhc2luZzpzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGxldCBkZWxpbSA9IHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZGVsaW1pdGVyO1xuXHRcdGxldCBib29rX25hbWUgPSB0aGlzLnRvX2Nhc2UoYm9vay5uYW1lLCBjYXNpbmcsIGRlbGltKTtcblxuXHRcdGlmIChwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2FiYnJldmlhdGVkKSB7XG5cdFx0XHRib29rX25hbWUgPSB0aGlzLmFiYnJldmlhdGVfYm9va19uYW1lKGJvb2tfbmFtZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGJvb2tfbmFtZVxuXHR9XG5cdFxuXHRmb3JtYXRfY2hhcHRlcl9ib2R5KHBsdWdpbjpNeUJpYmxlKTogc3RyaW5nIHtcblx0XHRsZXQgY2FzaW5nID0gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbjtcblx0XHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfYm9keV9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKC97dmVyc2VzfS9nLCB0aGlzLnZlcnNlc190ZXh0KVxuXHRcdFx0LnJlcGxhY2UoL3tib29rfS9nLCB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW4sIHRoaXMuYm9vaywgY2FzaW5nKSlcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcodGhpcy5ib29rLmlkKVxuXHRcdFx0XHRcdC5wYWRTdGFydCgyICogTnVtYmVyKHBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfb3JkZXIpLCBcIjBcIilcblx0XHRcdClcblx0XHRcdC5yZXBsYWNlKC97Y2hhcHRlcn0vZywgU3RyaW5nKHRoaXMuY2hhcHRlcikpXG5cdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbikpXG5cdFx0XHQucmVwbGFjZSgve2xhc3RfY2hhcHRlcn0vZywgU3RyaW5nKHRoaXMubGFzdF9jaGFwdGVyKSlcblx0XHRcdC5yZXBsYWNlKC97bGFzdF9jaGFwdGVyX25hbWV9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfbmFtZShwbHVnaW4sIFwibGFzdFwiKSlcblx0XHRcdC5yZXBsYWNlKC97bGFzdF9jaGFwdGVyX2Jvb2t9L2csIHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHBsdWdpbiwgdGhpcy5sYXN0X2Jvb2ssIGNhc2luZykpXG5cdFx0XHQucmVwbGFjZSgve25leHRfY2hhcHRlcn0vZywgU3RyaW5nKHRoaXMubmV4dF9jaGFwdGVyKSlcblx0XHRcdC5yZXBsYWNlKC97bmV4dF9jaGFwdGVyX25hbWV9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfbmFtZShwbHVnaW4sIFwibmV4dFwiKSlcblx0XHRcdC5yZXBsYWNlKC97bmV4dF9jaGFwdGVyX2Jvb2t9L2csIHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHBsdWdpbiwgdGhpcy5uZXh0X2Jvb2ssIGNhc2luZykpXG5cdFx0XHQucmVwbGFjZSgve2ZpcnN0X2NoYXB0ZXJ9L2csIFwiMVwiKVxuXHRcdFx0LnJlcGxhY2UoL3tmaXJzdF9jaGFwdGVyX25hbWV9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfbmFtZShwbHVnaW4sIFwiZmlyc3RcIikpXG5cdFx0XHQucmVwbGFjZSgve2ZpbmFsX2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLmJvb2suY2hhcHRlcnMpKVxuXHRcdFx0LnJlcGxhY2UoL3tmaW5hbF9jaGFwdGVyX25hbWV9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfbmFtZShwbHVnaW4sIFwiZmluYWxcIikpO1xuXHR9XG5cblx0Zm9ybWF0X2NoYXB0ZXJfbmFtZShwbHVnaW46TXlCaWJsZSwgdGVuc2U6c3RyaW5nPVwiY3VycmVudFwiKTogc3RyaW5nIHtcblx0XHRsZXQgZm9ybWF0ID0gcGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfbmFtZV9mb3JtYXQ7XG5cdFx0aWYgKGZvcm1hdC5sZW5ndGggPT0gMCkge1xuXHRcdFx0Zm9ybWF0ID0gREVGQVVMVF9TRVRUSU5HUy5jaGFwdGVyX25hbWVfZm9ybWF0O1xuXHRcdH1cblx0XHRsZXQgcGFkX2J5ID0gMztcblx0XHRpZiAodGhpcy5nZXRfdmVyc2VfY291bnQoKSA8IDEwKSB7XG5cdFx0XHRwYWRfYnkgPSAxO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5nZXRfdmVyc2VfY291bnQoKSA8IDEwMCkge1xuXHRcdFx0cGFkX2J5ID0gMjtcblx0XHR9XG5cblx0XHRsZXQgY2FzaW5nID0gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbjtcblx0XHRsZXQgZGVsaW0gPSBwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2RlbGltaXRlcjtcblx0XHRsZXQgYm9va19uYW1lID0gXCJcIjtcblx0XHRsZXQgY2hhcHRlciA9IC0xO1xuXHRcdHN3aXRjaCAodGVuc2UpIHtcblx0XHRcdGNhc2UgXCJjdXJyZW50XCI6IHtcblx0XHRcdFx0Ym9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLmJvb2ssIGNhc2luZyk7XG5cdFx0XHRcdGNoYXB0ZXIgPSB0aGlzLmNoYXB0ZXJcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwibGFzdFwiOiB7XG5cdFx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHBsdWdpbiwgdGhpcy5sYXN0X2Jvb2ssIGNhc2luZyk7XG5cdFx0XHRcdGNoYXB0ZXIgPSB0aGlzLmxhc3RfY2hhcHRlclxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJuZXh0XCI6IHtcblx0XHRcdFx0Ym9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLm5leHRfYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0Y2hhcHRlciA9IHRoaXMubmV4dF9jaGFwdGVyXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImZpcnN0XCI6IHtcblx0XHRcdFx0Ym9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLmJvb2ssIGNhc2luZyk7XG5cdFx0XHRcdGNoYXB0ZXIgPSAxXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImZpbmFsXCI6IHtcblx0XHRcdFx0Ym9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLmJvb2ssIGNhc2luZyk7XG5cdFx0XHRcdGNoYXB0ZXIgPSB0aGlzLmJvb2suY2hhcHRlcnM7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5tYXRjaGVkIHN3aXRjaCBjYXNlIGF0IHRlbnNlICd7MH0nXCIuZm9ybWF0KHRlbnNlKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZvcm1hdFxuXHRcdFx0LnJlcGxhY2UoL3tib29rfS9nLCBib29rX25hbWUpXG5cdFx0XHQucmVwbGFjZShcblx0XHRcdFx0L3tvcmRlcn0vZyxcblx0XHRcdFx0U3RyaW5nKHRoaXMuYm9vay5pZClcblx0XHRcdFx0XHQucGFkU3RhcnQoMiAqIE51bWJlcihwbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZShcblx0XHRcdFx0L3tjaGFwdGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcoY2hhcHRlcilcblx0XHRcdFx0XHQucGFkU3RhcnQocGFkX2J5ICogTnVtYmVyKHBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfY2hhcHRlciksIFwiMFwiKSxcblx0XHRcdCk7XG5cdH1cblxuXHRmb3JtYXRfdmVyc2VfYm9keShwbHVnaW46TXlCaWJsZSwgYnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlczpib29sZWFuKTogc3RyaW5nIHtcblx0XHRsZXQgYm9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIoXG5cdFx0XHRwbHVnaW4sXG5cdFx0XHR0aGlzLmJvb2ssXG5cdFx0XHRcImN1cnJlbnRcIixcblx0XHQpO1xuXG5cdFx0bGV0IHZlcnNlX3RleHQgPSBcIlwiXG5cdFx0aWYgKGJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXMpIHtcblx0XHRcdHZlcnNlX3RleHQgPSBcImBgYCB2ZXJzZVxcblwiXG5cdFx0XHRcdCsgXCJ7Ym9va19pZH0ge2NoYXB0ZXJ9IHt2ZXJzZX0gXFxuXCJcblx0XHRcdFx0KyBcImBgYFwiXG5cdFx0fSBlbHNlIHtcblx0XHRcdHZlcnNlX3RleHQgPSB0aGlzLnRyYW5zbGF0aW9uX3RleHRzLmJvb2tzW3RoaXMuYm9vay5pZF1bdGhpcy5jaGFwdGVyLTFdW3RoaXMudmVyc2UtMV1cblx0XHR9XG5cblx0XHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLnZlcnNlX2JvZHlfZm9ybWF0XG5cdFx0XHQucmVwbGFjZSgve3ZlcnNlX3RleHR9L2csIHZlcnNlX3RleHQpXG5cdFx0XHQucmVwbGFjZSgve3ZlcnNlfS9nLCBTdHJpbmcodGhpcy52ZXJzZSkpXG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0XHRcdC5yZXBsYWNlKC97Ym9va19pZH0vZywgU3RyaW5nKHRoaXMuYm9vay5pZCkpXG5cdFx0XHQucmVwbGFjZShcblx0XHRcdFx0L3tvcmRlcn0vZyxcblx0XHRcdFx0U3RyaW5nKHRoaXMuYm9vay5pZClcblx0XHRcdFx0XHQucGFkU3RhcnQoMiAqIE51bWJlcihwbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLmNoYXB0ZXIpKVxuXHRcdFx0LnJlcGxhY2UoL3tjaGFwdGVyX25hbWV9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfbmFtZShwbHVnaW4pKVxuXHRcdFx0LnJlcGxhY2UoL3tmaW5hbF9jaGFwdGVyfS9nLCBTdHJpbmcodGhpcy5ib29rLmNoYXB0ZXJzKSlcblx0fVxuXG5cdHNldF9ib29rKGJvb2tfaWQ6Qm9va0lkKSB7XG5cdFx0bGV0IGJvb2tfaSA9IHRoaXMuZmluZF9ib29rKGJvb2tfaWQpO1xuXHRcdHRoaXMuYm9vayA9IHRoaXMuYm9va3NbYm9va19pXTtcblxuXHRcdGxldCBsYXN0X2Jvb2tfaSA9IHRoaXMuY2hhcHRlciAhPT0gMSA/IGJvb2tfaSA6IGJvb2tfaS0xO1xuXHRcdGlmIChsYXN0X2Jvb2tfaSA9PT0gLTEpIHtcblx0XHRcdGxhc3RfYm9va19pID0gdGhpcy5ib29rcy5sZW5ndGgtMVxuXHRcdH1cblx0XHR0aGlzLmxhc3RfYm9vayA9IHRoaXMuYm9va3NbbGFzdF9ib29rX2ldO1xuXHRcdFxuXHRcdGxldCBuZXh0X2Jvb2tfaSA9IHRoaXMuY2hhcHRlciAhPT0gdGhpcy5ib29rLmNoYXB0ZXJzID8gYm9va19pIDogYm9va19pKzE7XG5cdFx0aWYgKG5leHRfYm9va19pID09PSB0aGlzLmJvb2tzLmxlbmd0aCkge1xuXHRcdFx0bmV4dF9ib29rX2kgPSAwXG5cdFx0fVxuXHRcdHRoaXMubmV4dF9ib29rID0gdGhpcy5ib29rc1tuZXh0X2Jvb2tfaV07XG5cdH1cblxuXHRzZXRfY2hhcHRlcihjaGFwdGVyOm51bWJlcikge1xuXHRcdHRoaXMuY2hhcHRlciA9IGNoYXB0ZXI7XG5cdFx0dGhpcy5zZXRfYm9vayh0aGlzLmJvb2suaWQpO1xuXHRcdHRoaXMubGFzdF9jaGFwdGVyID0gY2hhcHRlciAhPT0gMSA/IGNoYXB0ZXItMSA6IHRoaXMubGFzdF9ib29rLmNoYXB0ZXJzXG5cdFx0dGhpcy5uZXh0X2NoYXB0ZXIgPSBjaGFwdGVyICE9PSB0aGlzLmJvb2suY2hhcHRlcnMgPyBjaGFwdGVyKzEgOiAxXG5cdH1cblxuXHQvLyBTZXRzIHRoZSBjYXBpdGFsaXphdGlvbiBvZiB0aGUgZ2l2ZW4gbmFtZSBkZXBlbmRpbmcgb24gKm5hbWVfY2FzZSouXG5cdHRvX2Nhc2UobmFtZTpzdHJpbmcsIG5hbWVfY2FzZTpzdHJpbmcsIGRlbGltZXRlcjpzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmIChuYW1lX2Nhc2UgPT0gXCJsb3dlcl9jYXNlXCIpIHtcblx0XHRcdHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCBkZWxpbWV0ZXIpO1xuXHRcdH0gZWxzZSBpZiAobmFtZV9jYXNlID09IFwidXBwZXJfY2FzZVwiKSB7XG5cdFx0XHRyZXR1cm4gbmFtZS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLyAvZywgZGVsaW1ldGVyKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5hbWUucmVwbGFjZSgvIC9nLCBkZWxpbWV0ZXIpO1xuXHR9XG5cblx0Z2V0X3ZlcnNlX2NvdW50KCk6bnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy52ZXJzZV9jb3VudHMuZ2V0X2NvdW50X2Zvcih0aGlzLmJvb2suaWQsIHRoaXMuY2hhcHRlcik7XG5cdH1cbn1cblxuY2xhc3MgVmVyc2VDb3VudHMge1xuXHRib29rczogUmVjb3JkPEJvb2tJZCwgUmVjb3JkPG51bWJlciwgbnVtYmVyPj5cblxuXHRnZXRfY291bnRfZm9yKGJvb2s6Qm9va0lkLCBjaGFwdGVyOm51bWJlcik6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuYm9va3NbYm9va11bY2hhcHRlcl1cblx0fVxufVxuXG5pbnRlcmZhY2UgVHJhbnNsYXRpb25EYXRhIHtcblx0dHJhbnNsYXRpb246IHN0cmluZztcblx0Ym9va3M6IFJlY29yZDxCb29rSWQsIEFycmF5PENoYXB0ZXJEYXRhPj47XG59XG5cbmludGVyZmFjZSBCb29rQ2FjaGUge1xuXHR0cmFuc2xhdGlvbjogU3RyaW5nO1xuXHRib29rX2lkOiBudW1iZXI7XG5cdGRhdGE6IEJvb2tEYXRhIHwgbnVsbDtcblx0bXV0ZXg6IE11dGV4O1xufVxuXG5pbnRlcmZhY2UgQm9va0RhdGEge1xuXHRpZDogbnVtYmVyO1xuXHRjaGFwdGVyczogbnVtYmVyO1xuXHRuYW1lOiBzdHJpbmc7XG59XG5cbnR5cGUgQm9va0lkID0gbnVtYmVyO1xuXG5pbnRlcmZhY2UgQ2hhcHRlckNhY2hlIHtcblx0dHJhbnNsYXRpb246IFN0cmluZztcblx0Ym9va19pZDogbnVtYmVyO1xuXHRjaGFwdGVyOiBOdW1iZXI7XG5cdGNoYXB0ZXJfZGF0YTogQ2hhcHRlckRhdGEgfCBudWxsO1xuXHRtdXRleDogTXV0ZXg7XG59XG5cbnR5cGUgQ2hhcHRlckRhdGEgPSBBcnJheTxzdHJpbmc+O1xuXG5pbnRlcmZhY2UgVmVyc2VEYXRhIHtcblx0cGs6IHN0cmluZyxcblx0dGV4dDogc3RyaW5nLFxuXHR2ZXJzZTogbnVtYmVyLFxufTtcblxuY2xhc3MgQmlibGVBUEkge1xuXHRib29rX2NhY2hlOiBSZWNvcmQ8Qm9va0tleSwgQm9va0NhY2hlPiA9IHt9O1xuXHRjYWNoZV9jbGVhcl90aW1lcjogUHJvbWlzZTxudWxsPiB8IG51bGwgPSBudWxsO1xuXHRjYWNoZV9jbGVhcl90aW1lcl9wcm9taXNlX2VycjogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcblx0Y2hhcHRlcl9jYWNoZTogUmVjb3JkPENoYXB0ZXJLZXksIENoYXB0ZXJDYWNoZT4gPSB7fTtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGFzeW5jIGNhY2hlX2NoYXB0ZXIoXG5cdFx0dHJhbnNsYXRpb246IHN0cmluZyxcblx0XHRib29rX2lkOiBudW1iZXIsXG5cdFx0Y2hhcHRlcjogbnVtYmVyLFxuXHRcdGNoYXB0ZXJfZGF0YTogQ2hhcHRlckRhdGEgfCBudWxsLFxuXHRcdHNhdmVfbG9jYWxseTogYm9vbGVhbixcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IGtleSA9IHRoaXMubWFrZV9jaGFwdGVyX2tleSh0cmFuc2xhdGlvbiwgYm9va19pZCwgY2hhcHRlcik7XG5cdFx0dGhpcy5jaGFwdGVyX2NhY2hlW2tleV0gPSB7XG5cdFx0XHR0cmFuc2xhdGlvbjogdHJhbnNsYXRpb24sXG5cdFx0XHRib29rX2lkOiBib29rX2lkLFxuXHRcdFx0Y2hhcHRlcjogY2hhcHRlcixcblx0XHRcdGNoYXB0ZXJfZGF0YTogY2hhcHRlcl9kYXRhLFxuXHRcdFx0bXV0ZXg6IG5ldyBNdXRleCxcblx0XHR9O1xuXG5cdFx0Ly8gU2F2ZSBjaGFwdGVyIHRvIGxvY2FsIGZpbGUgc3l0ZW1cblx0XHRpZiAoc2F2ZV9sb2NhbGx5KSB7XG5cdFx0XHRsZXQgY2FjaGVfcGF0aCA9IHRoaXMuZ2V0X2NhY2hlX3BhdGgoKTtcblx0XHRcdHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKGNhY2hlX3BhdGgpO1xuXHRcdFx0bGV0IGNhY2hlZF9maWxlX25hbWUgPSBcInswfSB7MX0gezJ9LnR4dFwiXG5cdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKTtcblx0XHRcdGxldCBjYWNoZWRfZmlsZV9wYXRoID0gbm9ybWFsaXplUGF0aChcblx0XHRcdFx0Y2FjaGVfcGF0aCArIFwiL1wiICsgY2FjaGVkX2ZpbGVfbmFtZSxcblx0XHRcdCk7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGNoYXB0ZXJfZGF0YSAhPSBudWxsXG5cdFx0XHRcdCYmICFhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoY2FjaGVkX2ZpbGVfcGF0aClcblx0XHRcdCkge1xuXHRcdFx0XHRsZXQgYm9keSA9IFwiXCI7XG5cdFx0XHRcdGZvciAobGV0IGkgb2YgY2hhcHRlcl9kYXRhLmtleXMoKSkge1xuXHRcdFx0XHRcdGJvZHkgKz0gY2hhcHRlcl9kYXRhW2ldO1xuXHRcdFx0XHRcdGlmIChpICE9PSBjaGFwdGVyX2RhdGEubGVuZ3RoLTEpIHtcblx0XHRcdFx0XHRcdGJvZHkgKz0gXCJcXG5cIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci53cml0ZShcblx0XHRcdFx0XHRjYWNoZWRfZmlsZV9wYXRoLFxuXHRcdFx0XHRcdGJvZHksXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU3RhcnQvcmVmcmVzaCBjYWNoZSBjbGVhciB0aW1lclxuXHRcdGlmICh0aGlzLmNhY2hlX2NsZWFyX3RpbWVyICE9PSBudWxsICYmIHRoaXMuY2FjaGVfY2xlYXJfdGltZXJfcHJvbWlzZV9lcnIgIT09IG51bGwpIHtcblx0XHRcdC8vIENsZWFyIG91dCBvbGQgcHJvbWlzZVxuXHRcdFx0dGhpcy5jYWNoZV9jbGVhcl90aW1lcl9wcm9taXNlX2VycihudWxsKTtcblx0XHR9XG5cdFx0dGhpcy5jYWNoZV9jbGVhcl90aW1lciA9IG5ldyBQcm9taXNlKChvaywgZXJyKSA9PiB7XG5cdFx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyX3Byb21pc2VfZXJyID0gZXJyO1xuXHRcdFx0c2V0VGltZW91dChvaywgNjAwMDAgKiA2MCkgLy8gVGltZW91dCBhZnRlciAxIGhvdXJcblx0XHR9KTtcblx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyXG5cdFx0XHQudGhlbigoKSA9PiB0aGlzLmNsZWFyX2NhY2hlKCkpXG5cdFx0XHQuY2F0Y2goZXJyID0+IHsgfSk7XG5cdH1cblxuXHRhc3luYyBjbGVhcl9jYWNoZSgpIHtcblx0XHR0aGlzLmNoYXB0ZXJfY2FjaGUgPSB7fTtcblx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyID0gbnVsbDtcblxuXHRcdGxldCBjYWNoZV9wYXRoID0gdGhpcy5nZXRfY2FjaGVfcGF0aCgpO1xuXHRcdGlmIChhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoY2FjaGVfcGF0aCkpIHtcblx0XHRcdGlmICghYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIudHJhc2hTeXN0ZW0oY2FjaGVfcGF0aCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIudHJhc2hMb2NhbChjYWNoZV9wYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdGFzeW5jIGJvb2tfaWQodHJhbnNsYXRpb246c3RyaW5nLCBib29rX25hbWU6c3RyaW5nKSB7XG5cdFx0bGV0IGJvb2tzID0gYXdhaXQgdGhpcy5nZXRfYm9va3ModHJhbnNsYXRpb24pO1xuXHRcdGZvciAobGV0IGkgb2YgYm9va3Mua2V5cygpKSB7XG5cdFx0XHRpZiAoYm9va3NbaV0ubmFtZSA9PT0gYm9va19uYW1lKSB7XG5cdFx0XHRcdHJldHVybiBib29rc1tpXS5pZDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoYm9va19uYW1lIGluIERFRkFVTFRfTkFNRV9NQVApIHtcblx0XHRcdHJldHVybiBERUZBVUxUX05BTUVfTUFQW2Jvb2tfbmFtZV07XG5cdFx0fVxuXG5cdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XCJUcmFuc2xhdGlvbiAnezB9JyBoYXMgbm8gYm9vayBuYW1lZCAnezF9J1wiXG5cdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24sIGJvb2tfbmFtZSlcblx0XHQpO1xuXHR9XG5cblxuXHRhc3luYyBnZXRfdHJhbnNsYXRpb24odHJhbnNsYXRpb246IHN0cmluZyk6IFByb21pc2U8VHJhbnNsYXRpb25EYXRhPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0YXN5bmMgZ2V0X2Jvb2sodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDpCb29rSWQpOiBQcm9taXNlPEJvb2tEYXRhPiB7XG5cdFx0bGV0IGJvb2tfa2V5ID0gXCJ7MH0gezF9XCIuZm9ybWF0KHRyYW5zbGF0aW9uLCBTdHJpbmcoYm9va19pZCkpO1xuXG5cdFx0aWYgKCEoYm9va19rZXkgaW4gdGhpcy5ib29rX2NhY2hlKSkge1xuXHRcdFx0dGhpcy5ib29rX2NhY2hlW2Jvb2tfa2V5XSA9IHtcblx0XHRcdFx0Ym9va19pZDogYm9va19pZCxcblx0XHRcdFx0dHJhbnNsYXRpb246IHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRtdXRleDogbmV3IE11dGV4LFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRsZXQgY2FjaGVkID0gdGhpcy5ib29rX2NhY2hlW2Jvb2tfa2V5XTtcblx0XHRpZiAoY2FjaGVkLmRhdGEgPT09IG51bGwpIHtcblx0XHRcdGF3YWl0IGNhY2hlZC5tdXRleFxuXHRcdFx0XHQuYWNxdWlyZSgpXG5cdFx0XHRcdC50aGVuKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjYWNoZWQuZGF0YSA9IGF3YWl0IHRoaXMuX2dldF9ib29rKHRyYW5zbGF0aW9uLCBib29rX2lkKTtcblxuXHRcdFx0XHRcdGNhY2hlZC5tdXRleC5jYW5jZWwoKTtcblx0XHRcdFx0XHRjYWNoZWQubXV0ZXgucmVsZWFzZSgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZXJyID0+IHtcblx0XHRcdFx0XHRpZiAoZXJyID09PSBFX0NBTkNFTEVEKSB7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChjYWNoZWQuZGF0YSA9PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY2FjaGVkLmRhdGE7XG5cdH1cblxuXHRhc3luYyBfZ2V0X2Jvb2sodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDpCb29rSWQpOiBQcm9taXNlPEJvb2tEYXRhPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0Z2V0X2Jvb2tzKHRyYW5zbGF0aW9uOiBzdHJpbmcsKTogUHJvbWlzZTxBcnJheTxCb29rRGF0YT4+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXHRnZXRfY2FjaGVfcGF0aCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBub3JtYWxpemVQYXRoKHRoaXMucGx1Z2luLm1hbmlmZXN0LmRpciArIFwiLy5teWJpYmxlY2FjaGVcIik7XG5cdH1cblxuXHRhc3luYyBnZXRfY2hhcHRlcl9jYWNoZWQoXG5cdFx0dHJhbnNsYXRpb246IHN0cmluZyxcblx0XHRib29rX2lkOiBudW1iZXIsXG5cdFx0Y2hhcHRlcjogbnVtYmVyLFxuXHQpOiBQcm9taXNlPENoYXB0ZXJEYXRhPiB7XG5cdFx0bGV0IGNoYXB0ZXJfa2V5ID0gdGhpcy5tYWtlX2NoYXB0ZXJfa2V5KHRyYW5zbGF0aW9uLCBib29rX2lkLCBjaGFwdGVyKTtcblxuXHRcdGlmICghKGNoYXB0ZXJfa2V5IGluIHRoaXMuY2hhcHRlcl9jYWNoZSkpIHtcblx0XHRcdHRoaXMuY2FjaGVfY2hhcHRlcihcblx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdGNoYXB0ZXIsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdGZhbHNlLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRsZXQgY2FjaGVkID0gdGhpcy5jaGFwdGVyX2NhY2hlW2NoYXB0ZXJfa2V5XTtcblxuXHRcdGlmIChjYWNoZWQuY2hhcHRlcl9kYXRhID09PSBudWxsKSB7XG5cdFx0XHRhd2FpdCBjYWNoZWQubXV0ZXhcblx0XHRcdFx0LmFjcXVpcmUoKVxuXHRcdFx0XHQudGhlbihhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JlX2xvY2FsbHkpIHtcblx0XHRcdFx0XHRcdC8vIEF0dGVtcHQgdG8gbG9hZCBjaGFwdGVyIGxvY2FsbHlcblx0XHRcdFx0XHRcdGxldCBjYWNoZWRfZmlsZV9uYW1lID0gXCJ7MH0gezF9IHsyfS50eHRcIlxuXHRcdFx0XHRcdFx0XHQuZm9ybWF0KHRyYW5zbGF0aW9uLCBTdHJpbmcoYm9va19pZCksIFN0cmluZyhjaGFwdGVyKSk7XG5cdFx0XHRcdFx0XHRsZXQgY2FjaGVfcGF0aCA9IHRoaXMuZ2V0X2NhY2hlX3BhdGgoKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKGNhY2hlX3BhdGgpO1xuXHRcdFx0XHRcdFx0bGV0IGNhY2hlZF9maWxlX3BhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0XHRcdFx0XHRjYWNoZV9wYXRoICsgXCIvXCIgKyBjYWNoZWRfZmlsZV9uYW1lXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlclxuXHRcdFx0XHRcdFx0XHRcdC5leGlzdHMoY2FjaGVkX2ZpbGVfcGF0aClcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRsZXQgcmF3ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXJcblx0XHRcdFx0XHRcdFx0XHQucmVhZChjYWNoZWRfZmlsZV9wYXRoKTtcblx0XHRcdFx0XHRcdFx0aWYgKHJhdy5zdGFydHNXaXRoKFwiW1wiKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNhY2hlZC5jaGFwdGVyX2RhdGEgPSBKU09OLnBhcnNlKHJhdyk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGVkLmNoYXB0ZXJfZGF0YSA9IHJhdy5zcGxpdChcIlxcblwiKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjYWNoZWQuY2hhcHRlcl9kYXRhID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHQvLyBGZXRjaCBjaGFwdGVyIGZyb20gdGhlIHdlYlxuXHRcdFx0XHRcdFx0Y2FjaGVkLmNoYXB0ZXJfZGF0YSA9IGF3YWl0IHRoaXMuZ2V0X2NoYXB0ZXJfdW5jYWNoZWQoXG5cdFx0XHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdFx0XHRib29rX2lkLFxuXHRcdFx0XHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWNoZWQubXV0ZXguY2FuY2VsKCk7XG5cdFx0XHRcdFx0Y2FjaGVkLm11dGV4LnJlbGVhc2UoKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGVyciA9PiB7XG5cdFx0XHRcdFx0aWYgKGVyciA9PT0gRV9DQU5DRUxFRCkge1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihlcnIpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoY2FjaGVkLmNoYXB0ZXJfZGF0YSA9PT0gbnVsbCB8fCBjYWNoZWQuY2hhcHRlcl9kYXRhLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5jYWNoZV9jaGFwdGVyKFxuXHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRib29rX2lkLFxuXHRcdFx0Y2hhcHRlcixcblx0XHRcdGNhY2hlZC5jaGFwdGVyX2RhdGEsXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdG9yZV9sb2NhbGx5LFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gY2FjaGVkLmNoYXB0ZXJfZGF0YTtcblx0fVxuXG5cdGFzeW5jIGdldF9jaGFwdGVyX3VuY2FjaGVkKFxuXHRcdHRyYW5zbGF0aW9uOiBzdHJpbmcsXG5cdFx0Ym9va19pZDogbnVtYmVyLFxuXHRcdGNoYXB0ZXI6IG51bWJlcixcblx0KTogUHJvbWlzZTxDaGFwdGVyRGF0YT4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuaW1wbGVtZW50ZWRcIilcblx0fVxuXG5cdGFzeW5jIGdldF9kZWZhdWx0X3RyYW5zbGF0aW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0Z2V0X3RyYW5zbGF0aW9ucygpOiBQcm9taXNlPFRyYW5zbGF0aW9ucz4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuaW1wbGVtZW50ZWRcIilcblx0fVxuXG5cdGdldF92ZXJzZShcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdFx0dmVyc2U6IG51bWJlcixcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXG5cdGFzeW5jIGdldF92ZXJzZV9jb3VudCh0cmFuc2xhdGlvbjpzdHJpbmcpOiBQcm9taXNlPFZlcnNlQ291bnRzPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblxuXHRtYWtlX2NoYXB0ZXJfa2V5KHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2tfaWQ6IG51bWJlciwgY2hhcHRlcjogTnVtYmVyKSB7XG5cdFx0cmV0dXJuIFwiezB9LnsxfS57Mn1cIi5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKTtcblx0fVxufVxuXG50eXBlIEJvb2tLZXkgPSBzdHJpbmc7XG50eXBlIENoYXB0ZXJLZXkgPSBzdHJpbmc7XG5cbnR5cGUgVHJhbnNsYXRpb25zID0gUmVjb3JkPHN0cmluZywgVHJhbnNsYXRpb24+O1xuaW50ZXJmYWNlIFRyYW5zbGF0aW9uIHtcblx0ZGlzcGxheV9uYW1lOiBzdHJpbmcsXG5cdGFiYnJldmlhdGVkX25hbWU6IHN0cmluZyxcblx0bGFuZ3VhZ2U6IHN0cmluZyxcbn1cblxuXG5jbGFzcyBCb2xsc0xpZmVCaWJsZUFQSSBleHRlbmRzIEJpYmxlQVBJIHtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXHRjaGFwdGVyX2NhY2hlOiBSZWNvcmQ8Q2hhcHRlcktleSwgQ2hhcHRlckNhY2hlPiA9IHt9O1xuXHR0cmFuc2xhdGlvbnM6IFRyYW5zbGF0aW9ucyA9IHt9O1xuXHR0cmFuc2xhdGlvbl9tYXBzOiBSZWNvcmQ8c3RyaW5nLCBBcnJheTxCb29rRGF0YT4+ID0ge307XG5cdGNhY2hlX2NsZWFyX3RpbWVyOiBQcm9taXNlPG51bGw+IHwgbnVsbCA9IG51bGw7XG5cdGJvb2tfbXV0ZXg6TXV0ZXggPSBuZXcgTXV0ZXg7XG5cblx0X2NoYXB0ZXJfa2V5KHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2tfaWQ6IG51bWJlciwgY2hhcHRlcjogTnVtYmVyKSB7XG5cdFx0cmV0dXJuIFwiezB9LnsxfS57Mn1cIi5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKTtcblx0fVxuXG5cdGFzeW5jIF9nZW5lcmF0ZV90cmFuc2xhdGlvbl9tYXAodHJhbnNsYXRpb246IHN0cmluZykge1xuXHRcdGxldCBtYXA6IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+ID0gYXdhaXQgcmVxdWVzdFVybChcblx0XHRcdFwiaHR0cHM6Ly9ib2xscy5saWZlL2dldC1ib29rcy97MH0vXCIuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdCkuanNvbjtcblx0XHRsZXQgYm9va19kYXRhOiBBcnJheTxCb29rRGF0YT4gPSBbXTtcblx0XHRmb3IgKGxldCBpdGVtIG9mIG1hcCkge1xuXHRcdFx0Ym9va19kYXRhLnB1c2goe1xuXHRcdFx0XHRuYW1lOiBpdGVtW1wibmFtZVwiXSxcblx0XHRcdFx0Y2hhcHRlcnM6IGl0ZW1bXCJjaGFwdGVyc1wiXSxcblx0XHRcdFx0aWQ6IGl0ZW1bXCJib29raWRcIl0sXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dGhpcy50cmFuc2xhdGlvbl9tYXBzW3RyYW5zbGF0aW9uXSA9IGJvb2tfZGF0YTtcblx0fVxuXG5cdGFzeW5jIF9ib29rX3RvX2lkKHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2s6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG5cdFx0bGV0IGJvb2tfID0gYm9vay50b0xvd2VyQ2FzZSgpO1xuXHRcdGxldCBtYXAgPSBhd2FpdCB0aGlzLl9nZXRfdHJhbnNsYXRpb25fbWFwKFwiWUxUXCIpOyAvLyBUT0RPOiBNYWtlIHRyYW5zbGF0aW9uIGFjY29yZGluZyB0byB1c2VyIHNldHRpbmdzXG5cdFx0Zm9yIChsZXQgaSBpbiBtYXApIHtcblx0XHRcdGxldCBib29rX2RhdGEgPSBtYXBbaV07XG5cdFx0XHRpZiAoYm9va18gPT0gYm9va19kYXRhW1wibmFtZVwiXS50b0xvd2VyQ2FzZSgpKSB7XG5cdFx0XHRcdHJldHVybiBOdW1iZXIoaSkgKyAxO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIGJvb2sgZXhpc3RzIGJ5IG5hbWUgezB9LicuZm9ybWF0KGJvb2spKTtcblx0fVxuXG5cdGFzeW5jIF9pZF90b19ib29rKHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2tfaWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0bGV0IG1hcCA9IGF3YWl0IHRoaXMuX2dldF90cmFuc2xhdGlvbl9tYXAoXCJZTFRcIik7IC8vIFRPRE86IE1ha2UgdHJhbnNsYXRpb24gYWNjb3JkaW5nIHRvIHVzZXIgc2V0dGluZ3Ncblx0XHRyZXR1cm4gbWFwW2Jvb2tfaWQgLSAxXVtcIm5hbWVcIl07XG5cdH1cblxuXHRhc3luYyBnZXRfY2hhcHRlcl91bmNhY2hlZChcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdCk6IFByb21pc2U8Q2hhcHRlckRhdGE+IHtcblx0XHQvLyBGZXRjaCBjaGFwdGVyIGZyb20gdGhlIHdlYlxuXHRcdHRyeSB7XG5cdFx0XHRsZXQgY2hhcHRlcl9kYXRhID0gSlNPTi5wYXJzZShhd2FpdCBodHRwR2V0KFxuXHRcdFx0XHRcImh0dHBzOi8vYm9sbHMubGlmZS9nZXQtY2hhcHRlci97MH0vezF9L3syfS9cIlxuXHRcdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKVxuXHRcdFx0KSkubWFwKCh4OiBWZXJzZURhdGEpID0+IHgudGV4dCk7XG5cblx0XHRcdHJldHVybiBjaGFwdGVyX2RhdGE7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIk5vIGJvb2sgZXhpc3RzIGJ5IG5hbWVcIikpIHtcblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBfZ2V0X3RyYW5zbGF0aW9uX21hcCh0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxCb29rRGF0YT4+IHtcblx0XHRpZiAoISh0cmFuc2xhdGlvbiBpbiB0aGlzLnRyYW5zbGF0aW9uX21hcHMpKSB7XG5cdFx0XHRhd2FpdCB0aGlzLl9nZW5lcmF0ZV90cmFuc2xhdGlvbl9tYXAodHJhbnNsYXRpb24pO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGlvbl9tYXBzW3RyYW5zbGF0aW9uXTtcblx0fVxuXG5cdGFzeW5jIGdldF90cmFuc2xhdGlvbih0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxUcmFuc2xhdGlvbkRhdGE+IHtcblx0XHRsZXQgdmVyc2VzID0gSlNPTi5wYXJzZShcblx0XHRcdGF3YWl0IGh0dHBHZXQoXG5cdFx0XHRcdFwiaHR0cHM6Ly9ib2xscy5saWZlL3N0YXRpYy90cmFuc2xhdGlvbnMvezB9Lmpzb25cIi5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0XHQpXG5cdFx0KTtcblxuXHRcdGxldCBiaWJsZTogVHJhbnNsYXRpb25EYXRhID0ge1xuXHRcdFx0dHJhbnNsYXRpb246IHRyYW5zbGF0aW9uLFxuXHRcdFx0Ym9va3M6IHt9LFxuXHRcdH07XG5cblx0XHRhd2FpdCBuZXcgUHJvbWlzZShhc3luYyAob2ssIGVycikgPT4ge1xuXHRcdFx0bGV0IGkgPSAwO1xuXHRcdFx0bGV0IGN1cnJfYm9va19pZCA9IC0xO1xuXHRcdFx0bGV0IGN1cnJfY2hhcHRlciA9IC0xO1xuXHRcdFx0d2hpbGUgKGkgIT0gdmVyc2VzLmxlbmd0aCkge1xuXHRcdFx0XHRsZXQgdmVyc2VfanNvbiA9IHZlcnNlc1tpXTtcblx0XHRcdFx0aWYgKGN1cnJfYm9va19pZCAhPSB2ZXJzZV9qc29uW1wiYm9va1wiXSkge1xuXHRcdFx0XHRcdGN1cnJfYm9va19pZCA9IHZlcnNlX2pzb25bXCJib29rXCJdXG5cdFx0XHRcdFx0YmlibGUuYm9va3NbY3Vycl9ib29rX2lkXSA9IFtdO1xuXHRcdFx0XHRcdGN1cnJfY2hhcHRlciA9IC0xXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGN1cnJfY2hhcHRlciAhPSB2ZXJzZV9qc29uW1wiY2hhcHRlclwiXSkge1xuXHRcdFx0XHRcdGN1cnJfY2hhcHRlciA9IHZlcnNlX2pzb25bXCJjaGFwdGVyXCJdO1xuXHRcdFx0XHRcdGxldCBib29rX2RhdGEgPSBiaWJsZS5ib29rc1tjdXJyX2Jvb2tfaWRdO1xuXHRcdFx0XHRcdGJvb2tfZGF0YS5wdXNoKFtdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRiaWJsZS5ib29rc1tjdXJyX2Jvb2tfaWRdW2N1cnJfY2hhcHRlciAtIDFdLnB1c2godmVyc2VfanNvbltcInRleHRcIl0pO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cdFx0XHRvayhudWxsKTtcblx0XHR9KVxuXG5cdFx0cmV0dXJuIGJpYmxlO1xuXHR9XG5cblx0YXN5bmMgX2dldF9ib29rKHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2tfaWQ6Qm9va0lkKTogUHJvbWlzZTxCb29rRGF0YT4ge1xuXHRcdGxldCBib29rcyA9IGF3YWl0IHRoaXMuZ2V0X2Jvb2tzKHRyYW5zbGF0aW9uKTtcblx0XHRmb3IgKGxldCBib29rIG9mIGJvb2tzKSB7XG5cdFx0XHRpZiAoYm9vay5pZCA9PSBib29rX2lkKSB7XG5cdFx0XHRcdHRoaXMuYm9va19tdXRleC5jYW5jZWwoKTtcblx0XHRcdFx0dGhpcy5ib29rX211dGV4LnJlbGVhc2UoKTtcblx0XHRcdFx0cmV0dXJuIGJvb2s7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRocm93IG5ldyBFcnJvcigpO1xuXHR9XG5cblx0YXN5bmMgZ2V0X2Jvb2tzKHRyYW5zbGF0aW9uOiBzdHJpbmcpOiBQcm9taXNlPEJvb2tEYXRhW10+IHtcblx0XHRsZXQgYm9va3MgPSBhd2FpdCB0aGlzLl9nZXRfdHJhbnNsYXRpb25fbWFwKHRyYW5zbGF0aW9uKTtcblx0XHRib29rcy5zb3J0KGZ1bmN0aW9uKHgsIHkpIHtcblx0XHRcdGlmICh4LmlkIDwgeS5pZCkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoeC5pZCA+IHkuaWQpIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9KTtcblx0XHRyZXR1cm4gYm9va3M7XG5cdH1cblxuXHRhc3luYyBnZXRfZGVmYXVsdF90cmFuc2xhdGlvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHJldHVybiBcIllMVFwiO1xuXHR9XG5cblx0YXN5bmMgZ2V0X3RyYW5zbGF0aW9ucygpOiBQcm9taXNlPFRyYW5zbGF0aW9ucz4ge1xuXHRcdGlmIChPYmplY3Qua2V5cyh0aGlzLnRyYW5zbGF0aW9ucykubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRsZXQgbGlzdCA9IEpTT04ucGFyc2UoYXdhaXQgaHR0cEdldChcblx0XHRcdFx0XCJodHRwczovL2JvbGxzLmxpZmUvc3RhdGljL2JvbGxzL2FwcC92aWV3cy9sYW5ndWFnZXMuanNvblwiXG5cdFx0XHQpKTtcblx0XHRcdGZvciAobGV0IGxhbmd1YWdlIG9mIGxpc3QpIHtcblx0XHRcdFx0Zm9yIChsZXQgaXRlbSBvZiBsYW5ndWFnZVtcInRyYW5zbGF0aW9uc1wiXSkge1xuXHRcdFx0XHRcdGlmIChpdGVtW1wic2hvcnRfbmFtZVwiXSBpbiB0aGlzLnRyYW5zbGF0aW9ucykge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVHJhbnNsYXRpb24gYWxyZWFkeSBhZGRlZCB0byBtYXBcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMudHJhbnNsYXRpb25zW2l0ZW1bXCJzaG9ydF9uYW1lXCJdXSA9IHtcblx0XHRcdFx0XHRcdGFiYnJldmlhdGVkX25hbWU6IGl0ZW1bXCJzaG9ydF9uYW1lXCJdLFxuXHRcdFx0XHRcdFx0ZGlzcGxheV9uYW1lOiBpdGVtW1wiZnVsbF9uYW1lXCJdLFxuXHRcdFx0XHRcdFx0bGFuZ3VhZ2U6IGxhbmd1YWdlW1wibGFuZ3VhZ2VcIl0sXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGlvbnM7XG5cdH1cblxuXHRhc3luYyBnZXRfdmVyc2UoXG5cdFx0dHJhbnNsYXRpb246IHN0cmluZyxcblx0XHRib29rX2lkOiBudW1iZXIsXG5cdFx0Y2hhcHRlcjogbnVtYmVyLFxuXHRcdHZlcnNlOiBudW1iZXIsXG5cdCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0bGV0IGNoYXB0ZXJfZGF0YSA9IGF3YWl0IHRoaXMuZ2V0X2NoYXB0ZXJfY2FjaGVkKFxuXHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRib29rX2lkLFxuXHRcdFx0Y2hhcHRlcixcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGNoYXB0ZXJfZGF0YVt2ZXJzZSAtIDFdIHx8IFwiXCI7XG5cdH1cblxuXHRhc3luYyBnZXRfdmVyc2VfY291bnQodHJhbnNsYXRpb246c3RyaW5nKTogUHJvbWlzZTxWZXJzZUNvdW50cz4ge1xuXHRcdGxldCBqc29uID0gSlNPTi5wYXJzZShhd2FpdCBodHRwR2V0KFxuXHRcdFx0XCJodHRwczovL2JvbGxzLmxpZmUvZ2V0LXZlcnNlLWNvdW50cy97MH0vXCIuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdCkpO1xuXHRcdGxldCBjb3VudHMgPSBuZXcgVmVyc2VDb3VudHMoKTtcblx0XHRjb3VudHMuYm9va3MgPSBqc29uO1xuXHRcdHJldHVybiBjb3VudHNcblx0fVxufVxuXG5jbGFzcyBFcnJvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwbHVnaW46IE15QmlibGVcblx0dGl0bGU6IHN0cmluZ1xuXHRib2R5OiBzdHJpbmdcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeUJpYmxlLCB0aXRsZTpzdHJpbmcsIGJvZHk6c3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnRpdGxlID0gdGl0bGU7XG5cdFx0dGhpcy5ib2R5ID0gYm9keTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogdGhpcy5ib2R5IH0pO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgQ2xlYXJDYWNoZUZpbGVzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogTXlCaWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeUJpYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGxldCBiaWJsZV9wYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlibGVfZm9sZGVyO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNsZWFyIGNhY2hlP1wiIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogXCJZb3UgYXJlIGFib3V0IHRvIGNsZWFyIG91dCBhbGwgY2FjaGVkIGNoYXB0ZXJzIGZyb20geW91ciBmaWxlIHN5c3RlbS4gVGhpcyBpbmNsdWRlcyB0cmFuc2xhdGlvbnMgeW91IG1hbnVhbGx5IGRvd25sb2FkZWQuXCJcblx0XHRcdFx0LmZvcm1hdChiaWJsZV9wYXRoKVxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJEbyB5b3Ugd2FudCB0byBjbGVhciB0aGUgY2FjaGU/XCJcblx0XHR9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHt9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDbGVhciBjYWNoZVwiKVxuXHRcdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmJpYmxlX2FwaS5jbGVhcl9jYWNoZSgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkNhY2hlIGNsZWFyZWQhXCIpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBDbGVhck9sZEJpYmxlRmlsZXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15QmlibGUpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0bGV0IGJpYmxlX3BhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJsZV9mb2xkZXI7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQmlibGUgZm9sZGVyIGlzIG5vdCBlbXB0eVwiIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogXCJUaGUgQmlibGUgZm9sZGVyIGluIHlvdXIgc2V0dGluZ3MgaXMgbm90IGVtcHR5LiBJZiB5b3UgYnVpbHQgYSBCaWJsZSBpbiB0aGlzIGZvbGRlciBiZWZvcmUgdGhlIG5ldyBiaWJsZSBtYXkgYmUgaW50ZXJsYWNlZCB3aXRoIHRoZSBvbGQgb25lLlwiXG5cdFx0XHRcdC5mb3JtYXQoYmlibGVfcGF0aClcblx0XHR9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdHRleHQ6IFwiRG8geW91IHdhbnQgdG8gY2xlYXIgdGhlIGZvbGRlciBiZWZvcmUgYnVpbGRpbmcgeW91ciBCaWJsZT9cIlxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG5cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG5cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkJ1aWxkIHdpdGhvdXQgY2xlYXJpbmdcIilcblx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKEJVSUxEX1NUQVJUX1RPQVNUKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmJ1aWxkX2JpYmxlKGJpYmxlX3BhdGgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShCVUlMRF9FTkRfVE9BU1QpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2xlYXIgYW5kIGJ1aWxkXCIpXG5cdFx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShCVUlMRF9TVEFSVF9UT0FTVCk7XG5cdFx0XHRcdFx0XHRsZXQgbGlzdCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubGlzdChiaWJsZV9wYXRoKTtcblx0XHRcdFx0XHRcdGZvciAobGV0IHBhdGggb2YgbGlzdC5maWxlcykge1xuXHRcdFx0XHRcdFx0XHRsZXQgYWJzdHJhY3QgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0aWYgKGFic3RyYWN0ICE9IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoYWJzdHJhY3QsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRmb3IgKGxldCBwYXRoIG9mIGxpc3QuZm9sZGVycykge1xuXHRcdFx0XHRcdFx0XHRsZXQgYWJzdHJhY3QgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0aWYgKGFic3RyYWN0ICE9IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoYWJzdHJhY3QsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5idWlsZF9iaWJsZShiaWJsZV9wYXRoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoQlVJTERfRU5EX1RPQVNUKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgRG93bmxvYWRCaWJsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwbHVnaW46IE15QmlibGU7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cblx0XHRsZXQgdHJhbnNsYXRpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmFuc2xhdGlvbjtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJEb3dubG9hZCBiaWJsZT9cIiB9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJzcGFuXCIsIHtcblx0XHRcdHRleHQ6IFwiWW91IGFyZSBhYm91dCB0byBkb3dubG9hZCB0aGUgZW50aXJlIHswfSB0cmFuc2xhdGlvbiBvZiB0aGUgQmlibGUsIGFjY29yZGluZyB0byB5b3VyIHNldHRpbmdzLlwiXG5cdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0fSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHR0ZXh0OiBcIkRvIHlvdSB3YW50IHRvIGNvbnRpbnVlP1wiXG5cdFx0fSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiRG93bmxvYWRcIilcblx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHR0aGlzLmRvd25sb2FkQmlibGUodHJhbnNsYXRpb24pO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxuXG5cdGFzeW5jIGRvd25sb2FkQmlibGUodHJhbnNsYXRpb246IHN0cmluZykge1xuXHRcdG5ldyBOb3RpY2UoXG5cdFx0XHQnU3RhcnRlZCBkb3dubG9hZCBvZiB0aGUgezB9IHRyYW5zbGF0aW9uISdcblx0XHRcdFx0LmZvcm1hdCh0cmFuc2xhdGlvbilcblx0XHQpO1xuXG5cdFx0bGV0IGJpYmxlID0gYXdhaXQgdGhpcy5wbHVnaW4uYmlibGVfYXBpLmdldF90cmFuc2xhdGlvbih0cmFuc2xhdGlvbik7XG5cdFx0Zm9yIChjb25zdCBib29rX2lkIGluIGJpYmxlLmJvb2tzKSB7XG5cdFx0XHRmb3IgKGxldCBjaGFwdGVyIG9mIEFycmF5KGJpYmxlLmJvb2tzW2Jvb2tfaWRdLmxlbmd0aCkua2V5cygpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmJpYmxlX2FwaS5jYWNoZV9jaGFwdGVyKFxuXHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdE51bWJlcihib29rX2lkKSxcblx0XHRcdFx0XHRjaGFwdGVyICsgMSxcblx0XHRcdFx0XHRiaWJsZS5ib29rc1tib29rX2lkXVtjaGFwdGVyXSxcblx0XHRcdFx0XHR0cnVlLFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG5ldyBOb3RpY2UoXG5cdFx0XHQnQ29tcGxldGVkIGRvd25sb2FkIG9mIHRoZSB7MH0gdHJhbnNsYXRpb24hJ1xuXHRcdFx0XHQuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdCk7XG5cdH1cbn1cblxuY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15QmlibGUpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnVHJhbnNsYXRpb24nKVxuXHRcdFx0LnNldERlc2MoJ1RoZSB2ZXJzaW9uIG9mIHRoZSBCaWJsZSB0byBkaXNwbGF5LicpXG5cdFx0XHQuYWRkRHJvcGRvd24oYXN5bmMgZHJvcCA9PiB7XG5cdFx0XHRcdGxldCB0cmFuc2xhdGlvbnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGtleSBpbiB0cmFuc2xhdGlvbnMpIHtcblx0XHRcdFx0XHRkcm9wLmFkZE9wdGlvbihcblx0XHRcdFx0XHRcdGtleSxcblx0XHRcdFx0XHRcdFwiezB9IC0gezF9IC0gezJ9XCIuZm9ybWF0KFxuXHRcdFx0XHRcdFx0XHR0cmFuc2xhdGlvbnNba2V5XS5sYW5ndWFnZSxcblx0XHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0XHR0cmFuc2xhdGlvbnNba2V5XS5kaXNwbGF5X25hbWUsXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkcm9wLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmFuc2xhdGlvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHRkcm9wLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRyYW5zbGF0aW9uKTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQmlibGUgZm9sZGVyJylcblx0XHRcdC5zZXREZXNjKCdBIHBhdGggdG8gdGhlIGZvbGRlciB3aGVyZSBhbGwgdGhlIGZpbGVzIGZvciB0aGUgYmlibGUgd2lsbCBiZSBwbGFjZWQuIElmIHRoZSBwYXRoIGRvZXMgbm90IGV4aXN0IGl0IHdpbGwgYmUgY3JlYXRlZC4nKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFwiICsgREVGQVVMVF9TRVRUSU5HUy5iaWJsZV9mb2xkZXIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJsZV9mb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXRIZWFkaW5nKClcblx0XHRcdC5zZXROYW1lKFwiQm9vayBGb3JtYXR0aW5nXCIpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdCb29rIG5hbWUgY2FwaXRhbGl6YXRpb24nKVxuXHRcdFx0LnNldERlc2MoJ0NhcGl0YWxpemF0aW9uIGZvciB0aGUgbmFtZXMgb2YgdGhlIG5vdGVzIG9mIGVhY2ggYm9vay4nKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3AgPT4gZHJvcFxuXHRcdFx0XHQuYWRkT3B0aW9uKFwibG93ZXJfY2FzZVwiLCBcIkxvd2VyIGNhc2VcIilcblx0XHRcdFx0LmFkZE9wdGlvbihcIm5hbWVfY2FzZVwiLCBcIk5hbWUgY2FzZVwiKVxuXHRcdFx0XHQuYWRkT3B0aW9uKFwidXBwZXJfY2FzZVwiLCBcIlVwcGVyIGNhc2VcIilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0FiYnJldmlhdGUgYm9vayBuYW1lcycpXG5cdFx0XHQuc2V0RGVzYygnQWJicmV2aWF0ZXMgYm9vayBuYW1lcyB0byB0aHJlZSBsZXR0ZXJzIHNvIHRoYXQsIGZvciBleGFtcGxlLCBcIkdlbmVzaXNcIiBiZWNvbWVzIFwiR2VuXCIgYW5kIFwiMSBLaW5nc1wiIGJlY29tZXMgXCIxS2lcIi4gKE1heSBjYXVzZSBpc3N1ZXMgaW4gc29tZSBsYW5ndWFnZXMpJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2FiYnJldmlhdGVkKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2FiYnJldmlhdGVkID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnUGFkZGVkIG9yZGVyIG51bWJlcnMnKVxuXHRcdFx0LnNldERlc2MoJ1doZW4gT04sIGNoYW5nZXMgXCJ7b3JkZXJ9XCIgaW4gdGhlIG5hbWVzIG9mIGJvb2sgZm9sZGVycyB0byBiZSBwYWRkZWQgd2l0aCBleHRyYSB6ZXJvcy4gRm9yIGV4YW1wbGUsIFwiMSBHZW5lc2lzXCIgd291bGQgYmVjb21lIFwiMDEgR2Vuc2lzXCIgd2hlbiB0dXJuZWQgT04uJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQm9vayBuYW1lIGRlbGltaXRlcicpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGNoYXJhY3RlcnMgc2VwYXJhdGluZyB3b3JkcyBpbiBib29rIG5hbWVzLCBzdWNoIGFzIHRoZSBzcGFjZXMgaW4gXCIxIEpvaG5cIiBvciBcIlNvbmcgb2YgU29sb21vblwiLicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFeGFtcGxlOiBcIicgKyBERUZBVUxUX1NFVFRJTkdTLmJvb2tfbmFtZV9mb3JtYXQgKyAnXCInKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2RlbGltaXRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9kZWxpbWl0ZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0XHRcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0Jvb2sgbmFtZSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ0Zvcm1hdHRpbmcgZm9yIHRoZSBuYW1lcyBvZiB0aGUgZm9sZGVycyBvZiBlYWNoIGJvb2sgb2YgdGhlIGJpYmxlLiBGb3IgZXhhbXBsZSwgXCJ7b3JkZXJ9IHtuYW1lfVwiIHdvdWxkIGJlY29tZSBcIjIgRXhvZHVzXCIuIExlYXZlIGJsYW5rIHRvIG5vdCBoYXZlIGZvbGRlcnMgZm9yIGVhY2ggYm9vay4nKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFwiICsgREVGQVVMVF9TRVRUSU5HUy5ib29rX25hbWVfZm9ybWF0KVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2Zvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9mb3JtYXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXRIZWFkaW5nKClcblx0XHRcdC5zZXROYW1lKFwiQ2hhcHRlciBGb3JtYXR0aW5nXCIpXG5cblx0XHRcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1BhZGRlZCBjaGFwdGVyIG51bWJlcnMnKVxuXHRcdFx0LnNldERlc2MoJ1doZW4gT04sIGNoYW5nZXMgXCJ7Y2hhcHRlcn1cIiAoYW5kIHJlbGF0ZWQpIGluIHRoZSBuYW1lcyBvZiBjaGFwdGVycyB0byBiZSBwYWRkZWQgd2l0aCBleHRyYSB6ZXJvcy4gRm9yIGV4YW1wbGUsIFwiUHNhbG1zIDVcIiB3b3VsZCBiZWNvbWUgXCJQc2FsbXMgMDA1XCIgd2hlbiB0dXJuZWQgT04uJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX2NoYXB0ZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfY2hhcHRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0NoYXB0ZXIgbmFtZSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ0Zvcm1hdHRpbmcgZm9yIHRoZSBuYW1lcyBvZiB0aGUgbm90ZXMgb2YgZWFjaCBjaGFwdGVyIG9mIGEgYm9vay4gRm9yIGV4YW1wbGUsIFwie2Jvb2t9IHtjaGFwdGVyfVwiIHdvdWxkIGJlY29tZSBcIlBzYWxtcyAyMy5tZFwiLicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfbmFtZV9mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX25hbWVfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9uYW1lX2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0NoYXB0ZXIgYm9keSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ0Zvcm1hdHRpbmcgZm9yIHRoZSBib2R5IG9mIGNoYXB0ZXIgbm90ZXMuJylcblx0XHRcdC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogXCIgKyBERUZBVUxUX1NFVFRJTkdTLmNoYXB0ZXJfYm9keV9mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2JvZHlfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9ib2R5X2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSlcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXRIZWFkaW5nKClcblx0XHRcdC5zZXROYW1lKFwiVmVyc2UgRm9ybWF0dGluZ1wiKVxuXHRcdFx0XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQnVpbGQgd2l0aCBkeW5hbWljIHZlcnNlcycpXG5cdFx0XHQuc2V0RGVzYygnV2hlbiBPTiwgdGhlIHRleHQgb2YgdmVyc2VzIHdpbGwgYmUgc2F2ZWQgYXMgdmVyc2UgcmVmZXJlbmNlcyB0aGF0IGFyZSBsb2FkZWQgYXMgeW91IHJlYWQgaXQuIFdoZW4gT0ZGLCBzYXZlcyB0aGUgdGV4dCBmb3IgeW91ciBjdXJyZW50IHRyYW5zbGF0aW9uIGludG8gdGhlIGJ1aWx0IGZpbGVzLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXMpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5idWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnVmVyc2UgYm9keSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ0Zvcm1hdHRpbmcgZm9yIHRoZSBib2R5IG9mIHZlcnNlcyBpbiBjaGFwdGVycy4nKVxuXHRcdFx0LmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJFeGFtcGxlOiBcIiArIERFRkFVTFRfU0VUVElOR1MudmVyc2VfYm9keV9mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52ZXJzZV9ib2R5X2Zvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnZlcnNlX2JvZHlfZm9ybWF0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0SGVhZGluZygpXG5cdFx0XHQuc2V0TmFtZShcIkRhdGFcIilcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1NhdmUgYmlibGUgbG9jYWxseScpXG5cdFx0XHQuc2V0RGVzYygnV2hlbiBPTiwgY2FjaGVzIHZpZXdlZCBjaGFwdGVycyBvbiB0aGUgbG9jYWwgZmlsZSBzeXN0ZW0sIHNvIHRoYXQgdGhleSBjYW4gYmUgYWNjZXNzZWQgd2l0aG91dCBhbiBpbnRlcm5ldCBjb25uZWN0aW9uLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JlX2xvY2FsbHkpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdG9yZV9sb2NhbGx5ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdH1cbn1cblxuY29uc3QgREVGQVVMVF9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgQm9va0lkPiA9IHtcblx0XCJHZW5lc2lzXCI6IDEsXG5cdFwiRXhvZHVzXCI6IDIsXG5cdFwiTGV2aXRpY3VzXCI6IDMsXG5cdFwiTnVtYmVyc1wiOiA0LFxuXHRcIkRldXRlcm9ub215XCI6IDUsXG5cdFwiSm9zaHVhXCI6IDYsXG5cdFwiSnVkZ2VzXCI6IDcsXG5cdFwiUnV0aFwiOiA4LFxuXHRcIjEgU2FtdWVsXCI6IDksXG5cdFwiMiBTYW11ZWxcIjogMTAsXG5cdFwiMSBLaW5nc1wiOiAxMSxcblx0XCIyIEtpbmdzXCI6IDEyLFxuXHRcIjEgQ2hyb25pY2xlc1wiOiAxMyxcblx0XCIyIENocm9uaWNsZXNcIjogMTQsXG5cdFwiRXpyYVwiOiAxNSxcblx0XCJOZWhlbWlhaFwiOiAxNixcblx0XCJFc3RoZXJcIjogMTcsXG5cdFwiSm9iXCI6IDE4LFxuXHRcIlBzYWxtc1wiOiAxOSxcblx0XCJQc2FsbVwiOiAxOSwgLy8gQWx0ZXJuYXRlIHNwZWxsaW5nXG5cdFwiUHJvdmVyYnNcIjogMjAsXG5cdFwiRWNjbGVzaWFzdGVzXCI6IDIxLFxuXHRcIlNvbmcgb2YgU29sb21vblwiOiAyMixcblx0XCJJc2FpYWhcIjogMjMsXG5cdFwiSmVyZW1pYWhcIjogMjQsXG5cdFwiTGFtZW50YXRpb25zXCI6IDI1LFxuXHRcIkV6ZWtpZWxcIjogMjYsXG5cdFwiRGFuaWVsXCI6IDI3LFxuXHRcIkhvc2VhXCI6IDI4LFxuXHRcIkpvZWxcIjogMjksXG5cdFwiQW1vc1wiOiAzMCxcblx0XCJPYmFkaWFoXCI6IDMxLFxuXHRcIkpvbmFoXCI6IDMyLFxuXHRcIk1pY2FoXCI6IDMzLFxuXHRcIk5haHVtXCI6IDM0LFxuXHRcIkhhYmFra3VrXCI6IDM1LFxuXHRcIlplcGhhbmlhaFwiOiAzNixcblx0XCJIYWdnYWlcIjogMzcsXG5cdFwiWmVjaGFyaWFoXCI6IDM4LFxuXHRcIk1hbGFjaGlcIjogMzksXG5cdFwiTWF0dGhld1wiOiA0MCxcblx0XCJNYXJrXCI6IDQxLFxuXHRcIkx1a2VcIjogNDIsXG5cdFwiSm9oblwiOiA0Myxcblx0XCJBY3RzXCI6IDQ0LFxuXHRcIlJvbWFuc1wiOiA0NSxcblx0XCIxIENvcmludGhpYW5zXCI6IDQ2LFxuXHRcIjIgQ29yaW50aGlhbnNcIjogNDcsXG5cdFwiR2FsYXRpYW5zXCI6IDQ4LFxuXHRcIkVwaGVzaWFuc1wiOiA0OSxcblx0XCJQaGlsaXBwaWFuc1wiOiA1MCxcblx0XCJDb2xvc3NpYW5zXCI6IDUxLFxuXHRcIjEgVGhlc3NhbG9uaWFuc1wiOiA1Mixcblx0XCIyIFRoZXNzYWxvbmlhbnNcIjogNTMsXG5cdFwiMSBUaW1vdGh5XCI6IDU0LFxuXHRcIjIgVGltb3RoeVwiOiA1NSxcblx0XCJUaXR1c1wiOiA1Nixcblx0XCJQaGlsZW1vblwiOiA1Nyxcblx0XCJIZWJyZXdzXCI6IDU4LFxuXHRcIkphbWVzXCI6IDU5LFxuXHRcIjEgUGV0ZXJcIjogNjAsXG5cdFwiMiBQZXRlclwiOiA2MSxcblx0XCIxIEpvaG5cIjogNjIsXG5cdFwiMiBKb2huXCI6IDYzLFxuXHRcIjMgSm9oblwiOiA2NCxcblx0XCJKdWRlXCI6IDY1LFxuXHRcIlJldmVsYXRpb25cIjogNjYsXG5cdFwiMSBFc2RyYXNcIjogNjcsXG5cdFwiVG9iaXRcIjogNjgsXG5cdFwiSnVkaXRoXCI6IDY5LFxuXHRcIldpc2RvbVwiOiA3MCxcblx0XCJTaXJhY2hcIjogNzEsXG5cdFwiRXBpc3RsZSBvZiBKZXJlbWlhaFwiOiA3Mixcblx0XCJCYXJ1Y2hcIjogNzMsXG5cdFwiMSBNYWNjYWJlZXNcIjogNzQsXG5cdFwiMiBNYWNjYWJlZXNcIjogNzUsXG5cdFwiMiBFc2RyYXNcIjogNzcsIC8vIEp1bXAgaW4gbnVtYmVyXG5cdFwiU3VzYW5uYVwiOiA3OCxcblx0XCJCZWwgYW5kIERyYWdvblwiOiA3OSxcblx0XCJQcmF5ZXIgb2YgTWFuYXNzZWhcIjogODMsIC8vIEp1bXAgaW4gbnVtYmVyXG5cdFwiQXphcmlhaFwiOiA4OCwgLy8gSnVtcCBpbiBudW1iZXJcbn0iLCAiY29uc3QgRV9USU1FT1VUID0gbmV3IEVycm9yKCd0aW1lb3V0IHdoaWxlIHdhaXRpbmcgZm9yIG11dGV4IHRvIGJlY29tZSBhdmFpbGFibGUnKTtcbmNvbnN0IEVfQUxSRUFEWV9MT0NLRUQgPSBuZXcgRXJyb3IoJ211dGV4IGFscmVhZHkgbG9ja2VkJyk7XG5jb25zdCBFX0NBTkNFTEVEID0gbmV3IEVycm9yKCdyZXF1ZXN0IGZvciBsb2NrIGNhbmNlbGVkJyk7XG5cbnZhciBfX2F3YWl0ZXIkMiA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuY2xhc3MgU2VtYXBob3JlIHtcbiAgICBjb25zdHJ1Y3RvcihfdmFsdWUsIF9jYW5jZWxFcnJvciA9IEVfQ0FOQ0VMRUQpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHRoaXMuX2NhbmNlbEVycm9yID0gX2NhbmNlbEVycm9yO1xuICAgICAgICB0aGlzLl93ZWlnaHRlZFF1ZXVlcyA9IFtdO1xuICAgICAgICB0aGlzLl93ZWlnaHRlZFdhaXRlcnMgPSBbXTtcbiAgICB9XG4gICAgYWNxdWlyZSh3ZWlnaHQgPSAxKSB7XG4gICAgICAgIGlmICh3ZWlnaHQgPD0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCB3ZWlnaHQgJHt3ZWlnaHR9OiBtdXN0IGJlIHBvc2l0aXZlYCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3dlaWdodGVkUXVldWVzW3dlaWdodCAtIDFdKVxuICAgICAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzW3dlaWdodCAtIDFdID0gW107XG4gICAgICAgICAgICB0aGlzLl93ZWlnaHRlZFF1ZXVlc1t3ZWlnaHQgLSAxXS5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pO1xuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJ1bkV4Y2x1c2l2ZShjYWxsYmFjaywgd2VpZ2h0ID0gMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyJDIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBbdmFsdWUsIHJlbGVhc2VdID0geWllbGQgdGhpcy5hY3F1aXJlKHdlaWdodCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBjYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICByZWxlYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3YWl0Rm9yVW5sb2NrKHdlaWdodCA9IDEpIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSlcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWlnaHRlZFdhaXRlcnNbd2VpZ2h0IC0gMV0gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXS5wdXNoKHJlc29sdmUpO1xuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlzTG9ja2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWUgPD0gMDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcbiAgICB9XG4gICAgcmVsZWFzZSh3ZWlnaHQgPSAxKSB7XG4gICAgICAgIGlmICh3ZWlnaHQgPD0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCB3ZWlnaHQgJHt3ZWlnaHR9OiBtdXN0IGJlIHBvc2l0aXZlYCk7XG4gICAgICAgIHRoaXMuX3ZhbHVlICs9IHdlaWdodDtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICB0aGlzLl93ZWlnaHRlZFF1ZXVlcy5mb3JFYWNoKChxdWV1ZSkgPT4gcXVldWUuZm9yRWFjaCgoZW50cnkpID0+IGVudHJ5LnJlamVjdCh0aGlzLl9jYW5jZWxFcnJvcikpKTtcbiAgICAgICAgdGhpcy5fd2VpZ2h0ZWRRdWV1ZXMgPSBbXTtcbiAgICB9XG4gICAgX2Rpc3BhdGNoKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGZvciAobGV0IHdlaWdodCA9IHRoaXMuX3ZhbHVlOyB3ZWlnaHQgPiAwOyB3ZWlnaHQtLSkge1xuICAgICAgICAgICAgY29uc3QgcXVldWVFbnRyeSA9IChfYSA9IHRoaXMuX3dlaWdodGVkUXVldWVzW3dlaWdodCAtIDFdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2hpZnQoKTtcbiAgICAgICAgICAgIGlmICghcXVldWVFbnRyeSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSB0aGlzLl92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzV2VpZ2h0ID0gd2VpZ2h0O1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgLT0gd2VpZ2h0O1xuICAgICAgICAgICAgd2VpZ2h0ID0gdGhpcy5fdmFsdWUgKyAxO1xuICAgICAgICAgICAgcXVldWVFbnRyeS5yZXNvbHZlKFtwcmV2aW91c1ZhbHVlLCB0aGlzLl9uZXdSZWxlYXNlcihwcmV2aW91c1dlaWdodCldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kcmFpblVubG9ja1dhaXRlcnMoKTtcbiAgICB9XG4gICAgX25ld1JlbGVhc2VyKHdlaWdodCkge1xuICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2FsbGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2Uod2VpZ2h0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2RyYWluVW5sb2NrV2FpdGVycygpIHtcbiAgICAgICAgZm9yIChsZXQgd2VpZ2h0ID0gdGhpcy5fdmFsdWU7IHdlaWdodCA+IDA7IHdlaWdodC0tKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXS5mb3JFYWNoKCh3YWl0ZXIpID0+IHdhaXRlcigpKTtcbiAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSA9IFtdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgX19hd2FpdGVyJDEgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmNsYXNzIE11dGV4IHtcbiAgICBjb25zdHJ1Y3RvcihjYW5jZWxFcnJvcikge1xuICAgICAgICB0aGlzLl9zZW1hcGhvcmUgPSBuZXcgU2VtYXBob3JlKDEsIGNhbmNlbEVycm9yKTtcbiAgICB9XG4gICAgYWNxdWlyZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlciQxKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgWywgcmVsZWFzZXJdID0geWllbGQgdGhpcy5fc2VtYXBob3JlLmFjcXVpcmUoKTtcbiAgICAgICAgICAgIHJldHVybiByZWxlYXNlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJ1bkV4Y2x1c2l2ZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLnJ1bkV4Y2x1c2l2ZSgoKSA9PiBjYWxsYmFjaygpKTtcbiAgICB9XG4gICAgaXNMb2NrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW1hcGhvcmUuaXNMb2NrZWQoKTtcbiAgICB9XG4gICAgd2FpdEZvclVubG9jaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbWFwaG9yZS53YWl0Rm9yVW5sb2NrKCk7XG4gICAgfVxuICAgIHJlbGVhc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZW1hcGhvcmUuaXNMb2NrZWQoKSlcbiAgICAgICAgICAgIHRoaXMuX3NlbWFwaG9yZS5yZWxlYXNlKCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbWFwaG9yZS5jYW5jZWwoKTtcbiAgICB9XG59XG5cbnZhciBfX2F3YWl0ZXIgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmZ1bmN0aW9uIHdpdGhUaW1lb3V0KHN5bmMsIHRpbWVvdXQsIHRpbWVvdXRFcnJvciA9IEVfVElNRU9VVCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjcXVpcmU6ICh3ZWlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmICh3ZWlnaHQgIT09IHVuZGVmaW5lZCAmJiB3ZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCB3ZWlnaHQgJHt3ZWlnaHR9OiBtdXN0IGJlIHBvc2l0aXZlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGxldCBpc1RpbWVvdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaXNUaW1lb3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRpbWVvdXRFcnJvcik7XG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlja2V0ID0geWllbGQgc3luYy5hY3F1aXJlKHdlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGVhc2UgPSBBcnJheS5pc0FycmF5KHRpY2tldCkgPyB0aWNrZXRbMV0gOiB0aWNrZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxlYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGlja2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJ1bkV4Y2x1c2l2ZShjYWxsYmFjaywgd2VpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGxldCByZWxlYXNlID0gKCkgPT4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tldCA9IHlpZWxkIHRoaXMuYWNxdWlyZSh3ZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aWNrZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gdGlja2V0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKHRpY2tldFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxlYXNlID0gdGlja2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVsZWFzZSh3ZWlnaHQpIHtcbiAgICAgICAgICAgIHN5bmMucmVsZWFzZSh3ZWlnaHQpO1xuICAgICAgICB9LFxuICAgICAgICBjYW5jZWwoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3luYy5jYW5jZWwoKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2FpdEZvclVubG9jazogKHdlaWdodCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdlaWdodCAhPT0gdW5kZWZpbmVkICYmIHdlaWdodCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgc3luYy53YWl0Rm9yVW5sb2NrKHdlaWdodCkudGhlbihyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdCh0aW1lb3V0RXJyb3IpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpc0xvY2tlZDogKCkgPT4gc3luYy5pc0xvY2tlZCgpLFxuICAgICAgICBnZXRWYWx1ZTogKCkgPT4gc3luYy5nZXRWYWx1ZSgpLFxuICAgICAgICBzZXRWYWx1ZTogKHZhbHVlKSA9PiBzeW5jLnNldFZhbHVlKHZhbHVlKSxcbiAgICB9O1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpc25lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXNcbmZ1bmN0aW9uIHRyeUFjcXVpcmUoc3luYywgYWxyZWFkeUFjcXVpcmVkRXJyb3IgPSBFX0FMUkVBRFlfTE9DS0VEKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gd2l0aFRpbWVvdXQoc3luYywgMCwgYWxyZWFkeUFjcXVpcmVkRXJyb3IpO1xufVxuXG5leHBvcnQgeyBFX0FMUkVBRFlfTE9DS0VELCBFX0NBTkNFTEVELCBFX1RJTUVPVVQsIE11dGV4LCBTZW1hcGhvcmUsIHRyeUFjcXVpcmUsIHdpdGhUaW1lb3V0IH07XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBV087OztBQ1hQLElBQU0sWUFBWSxJQUFJLE1BQU0scURBQXFEO0FBQ2pGLElBQU0sbUJBQW1CLElBQUksTUFBTSxzQkFBc0I7QUFDekQsSUFBTSxhQUFhLElBQUksTUFBTSwyQkFBMkI7QUFFeEQsSUFBSSxjQUFvRCxTQUFVLFNBQVMsWUFBWSxHQUFHLFdBQVc7QUFDakcsV0FBUyxNQUFNLE9BQU87QUFBRSxXQUFPLGlCQUFpQixJQUFJLFFBQVEsSUFBSSxFQUFFLFNBQVUsU0FBUztBQUFFLGNBQVEsS0FBSztBQUFBLElBQUcsQ0FBQztBQUFBLEVBQUc7QUFDM0csU0FBTyxLQUFLLE1BQU0sSUFBSSxVQUFVLFNBQVUsU0FBUyxRQUFRO0FBQ3ZELGFBQVMsVUFBVSxPQUFPO0FBQUUsVUFBSTtBQUFFLGFBQUssVUFBVSxLQUFLLEtBQUssQ0FBQztBQUFBLE1BQUcsU0FBUyxHQUFQO0FBQVksZUFBTyxDQUFDO0FBQUEsTUFBRztBQUFBLElBQUU7QUFDMUYsYUFBUyxTQUFTLE9BQU87QUFBRSxVQUFJO0FBQUUsYUFBSyxVQUFVLE9BQU8sRUFBRSxLQUFLLENBQUM7QUFBQSxNQUFHLFNBQVMsR0FBUDtBQUFZLGVBQU8sQ0FBQztBQUFBLE1BQUc7QUFBQSxJQUFFO0FBQzdGLGFBQVMsS0FBSyxRQUFRO0FBQUUsYUFBTyxPQUFPLFFBQVEsT0FBTyxLQUFLLElBQUksTUFBTSxPQUFPLEtBQUssRUFBRSxLQUFLLFdBQVcsUUFBUTtBQUFBLElBQUc7QUFDN0csVUFBTSxZQUFZLFVBQVUsTUFBTSxTQUFTLGNBQWMs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
